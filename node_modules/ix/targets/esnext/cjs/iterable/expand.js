Object.defineProperty(exports, "__esModule", { value: true });
const iterable_1 = require("../iterable");
class ExpandIterable extends iterable_1.IterableX {
    constructor(source, fn) {
        super();
        this._source = source;
        this._fn = fn;
    }
    *[Symbol.iterator]() {
        let q = [this._source];
        while (q.length > 0) {
            let src = q.shift();
            for (let item of src) {
                q.push(this._fn(item));
                yield item;
            }
        }
    }
}
/**
 * Expands the sequence by recursively applying a selector function.
 * @param {Iterable<T>} source Source sequence.
 * @param {function(value: T): Iterable<T>} selector Selector function to retrieve the next sequence to expand
 * @return {Iterable<T>} Sequence with results from the recursive expansion of the source sequence.
 */
function expand(source, selector) {
    return new ExpandIterable(source, selector);
}
exports.expand = expand;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL2V4cGFuZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsMENBQXdDO0FBRXhDLG9CQUE4QixTQUFRLG9CQUFrQjtJQUl0RCxZQUFZLE1BQXlCLEVBQUUsRUFBeUM7UUFDOUUsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDaEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkIsT0FBTyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxDQUFDO1lBQ3BCLElBQUksR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNwQixHQUFHLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxHQUFJLENBQUMsQ0FBQyxDQUFDO2dCQUN0QixDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztnQkFDdkIsTUFBTSxJQUFJLENBQUM7WUFDYixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7Q0FDRjtBQUVEOzs7OztHQUtHO0FBQ0gsZ0JBQ0ksTUFBeUIsRUFDekIsUUFBK0M7SUFDakQsTUFBTSxDQUFDLElBQUksY0FBYyxDQUFVLE1BQU0sRUFBQyxRQUFRLENBQUMsQ0FBQztBQUN0RCxDQUFDO0FBSkQsd0JBSUMiLCJmaWxlIjoiaXRlcmFibGUvZXhwYW5kLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSXRlcmFibGVYIH0gZnJvbSAnLi4vaXRlcmFibGUnO1xuXG5jbGFzcyBFeHBhbmRJdGVyYWJsZTxUU291cmNlPiBleHRlbmRzIEl0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHByaXZhdGUgX3NvdXJjZTogSXRlcmFibGU8VFNvdXJjZT47XG4gIHByaXZhdGUgX2ZuOiAodmFsdWU6IFRTb3VyY2UpID0+IEl0ZXJhYmxlPFRTb3VyY2U+O1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sIGZuOiAodmFsdWU6IFRTb3VyY2UpID0+IEl0ZXJhYmxlPFRTb3VyY2U+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fZm4gPSBmbjtcbiAgfVxuXG4gICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICBsZXQgcSA9IFt0aGlzLl9zb3VyY2VdO1xuICAgIHdoaWxlIChxLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBzcmMgPSBxLnNoaWZ0KCk7XG4gICAgICBmb3IgKGxldCBpdGVtIG9mIHNyYyEpIHtcbiAgICAgICAgcS5wdXNoKHRoaXMuX2ZuKGl0ZW0pKTtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHBhbmRzIHRoZSBzZXF1ZW5jZSBieSByZWN1cnNpdmVseSBhcHBseWluZyBhIHNlbGVjdG9yIGZ1bmN0aW9uLlxuICogQHBhcmFtIHtJdGVyYWJsZTxUPn0gc291cmNlIFNvdXJjZSBzZXF1ZW5jZS5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24odmFsdWU6IFQpOiBJdGVyYWJsZTxUPn0gc2VsZWN0b3IgU2VsZWN0b3IgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG5leHQgc2VxdWVuY2UgdG8gZXhwYW5kXG4gKiBAcmV0dXJuIHtJdGVyYWJsZTxUPn0gU2VxdWVuY2Ugd2l0aCByZXN1bHRzIGZyb20gdGhlIHJlY3Vyc2l2ZSBleHBhbnNpb24gb2YgdGhlIHNvdXJjZSBzZXF1ZW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4cGFuZDxUU291cmNlPihcbiAgICBzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIHNlbGVjdG9yOiAodmFsdWU6IFRTb3VyY2UpID0+IEl0ZXJhYmxlPFRTb3VyY2U+KTogSXRlcmFibGVYPFRTb3VyY2U+IHtcbiAgcmV0dXJuIG5ldyBFeHBhbmRJdGVyYWJsZTxUU291cmNlPihzb3VyY2Usc2VsZWN0b3IpO1xufVxuIl19
