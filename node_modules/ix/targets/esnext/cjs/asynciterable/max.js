Object.defineProperty(exports, "__esModule", { value: true });
const identity_1 = require("../internal/identity");
async function max(source, selector = identity_1.identityAsync) {
    let atleastOnce = false;
    let value = -Infinity;
    for await (let item of source) {
        if (!atleastOnce) {
            atleastOnce = true;
        }
        let x = await selector(item);
        if (x > value) {
            value = x;
        }
    }
    if (!atleastOnce) {
        throw new Error('Sequence contains no elements');
    }
    return value;
}
exports.max = max;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvbWF4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtREFBcUQ7QUFROUMsS0FBSyxjQUNSLE1BQTBCLEVBQzFCLFdBQWlELHdCQUFhO0lBQ2hFLElBQUksV0FBVyxHQUFHLEtBQUssQ0FBQztJQUN4QixJQUFJLEtBQUssR0FBRyxDQUFDLFFBQVEsQ0FBQztJQUN0QixHQUFHLENBQUMsS0FBSyxDQUFMLENBQU8sSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztRQUM5QixFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDakIsV0FBVyxHQUFHLElBQUksQ0FBQztRQUNyQixDQUFDO1FBQ0QsSUFBSSxDQUFDLEdBQUcsTUFBTSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUM7WUFBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQUMsQ0FBQztJQUMvQixDQUFDO0lBQ0QsRUFBRSxDQUFDLENBQUMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDO1FBQ2pCLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBRUQsTUFBTSxDQUFDLEtBQUssQ0FBQztBQUNmLENBQUM7QUFqQkQsa0JBaUJDIiwiZmlsZSI6ImFzeW5jaXRlcmFibGUvbWF4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaWRlbnRpdHlBc3luYyB9IGZyb20gJy4uL2ludGVybmFsL2lkZW50aXR5JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1heChcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8bnVtYmVyPixcbiAgICBzZWxlY3Rvcj86ICh4OiBudW1iZXIpID0+IG51bWJlciB8IFByb21pc2U8bnVtYmVyPik6IFByb21pc2U8bnVtYmVyPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXg8VD4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFQ+LFxuICAgIHNlbGVjdG9yOiAoeDogVCkgPT4gbnVtYmVyIHwgUHJvbWlzZTxudW1iZXI+KTogUHJvbWlzZTxudW1iZXI+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG1heChcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8YW55PixcbiAgICBzZWxlY3RvcjogKHg6IGFueSkgPT4gbnVtYmVyIHwgUHJvbWlzZTxudW1iZXI+ID0gaWRlbnRpdHlBc3luYyk6IFByb21pc2U8bnVtYmVyPiB7XG4gIGxldCBhdGxlYXN0T25jZSA9IGZhbHNlO1xuICBsZXQgdmFsdWUgPSAtSW5maW5pdHk7XG4gIGZvciBhd2FpdCAobGV0IGl0ZW0gb2Ygc291cmNlKSB7XG4gICAgaWYgKCFhdGxlYXN0T25jZSkge1xuICAgICAgYXRsZWFzdE9uY2UgPSB0cnVlO1xuICAgIH1cbiAgICBsZXQgeCA9IGF3YWl0IHNlbGVjdG9yKGl0ZW0pO1xuICAgIGlmICh4ID4gdmFsdWUpIHsgdmFsdWUgPSB4OyB9XG4gIH1cbiAgaWYgKCFhdGxlYXN0T25jZSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2VxdWVuY2UgY29udGFpbnMgbm8gZWxlbWVudHMnKTtcbiAgfVxuXG4gIHJldHVybiB2YWx1ZTtcbn1cbiJdfQ==
