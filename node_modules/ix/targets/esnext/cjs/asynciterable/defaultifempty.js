Object.defineProperty(exports, "__esModule", { value: true });
const asynciterable_1 = require("../asynciterable");
class DefaultIfEmptyAsyncIterable extends asynciterable_1.AsyncIterableX {
    constructor(source, defaultValue) {
        super();
        this._source = source;
        this._defaultValue = defaultValue;
    }
    async *[Symbol.asyncIterator]() {
        let state = 1;
        for await (let item of this._source) {
            state = 2;
            yield item;
        }
        if (state === 1) {
            yield this._defaultValue;
        }
    }
}
function defaultIfEmpty(source, defaultValue) {
    return new DefaultIfEmptyAsyncIterable(source, defaultValue);
}
exports.defaultIfEmpty = defaultIfEmpty;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvZGVmYXVsdGlmZW1wdHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG9EQUFrRDtBQUVsRCxpQ0FBMkMsU0FBUSw4QkFBdUI7SUFJeEUsWUFBWSxNQUE4QixFQUFFLFlBQXFCO1FBQy9ELEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDdEIsSUFBSSxDQUFDLGFBQWEsR0FBRyxZQUFZLENBQUM7SUFDcEMsQ0FBQztJQUVELEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDM0IsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ2QsR0FBRyxDQUFDLEtBQUssQ0FBTCxDQUFPLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLEtBQUssR0FBRyxDQUFDLENBQUM7WUFDVixNQUFNLElBQUksQ0FBQztRQUNiLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxLQUFLLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoQixNQUFNLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDM0IsQ0FBQztJQUNILENBQUM7Q0FDRjtBQUVELHdCQUFrQyxNQUF3QixFQUFFLFlBQWU7SUFDekUsTUFBTSxDQUFDLElBQUksMkJBQTJCLENBQUksTUFBTSxFQUFFLFlBQVksQ0FBQyxDQUFDO0FBQ2xFLENBQUM7QUFGRCx3Q0FFQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL2RlZmF1bHRpZmVtcHR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNJdGVyYWJsZVggfSBmcm9tICcuLi9hc3luY2l0ZXJhYmxlJztcblxuY2xhc3MgRGVmYXVsdElmRW1wdHlBc3luY0l0ZXJhYmxlPFRTb3VyY2U+IGV4dGVuZHMgQXN5bmNJdGVyYWJsZVg8VFNvdXJjZT4ge1xuICBwcml2YXRlIF9zb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT47XG4gIHByaXZhdGUgX2RlZmF1bHRWYWx1ZTogVFNvdXJjZTtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sIGRlZmF1bHRWYWx1ZTogVFNvdXJjZSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuX2RlZmF1bHRWYWx1ZSA9IGRlZmF1bHRWYWx1ZTtcbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGxldCBzdGF0ZSA9IDE7XG4gICAgZm9yIGF3YWl0IChsZXQgaXRlbSBvZiB0aGlzLl9zb3VyY2UpIHtcbiAgICAgIHN0YXRlID0gMjtcbiAgICAgIHlpZWxkIGl0ZW07XG4gICAgfVxuICAgIGlmIChzdGF0ZSA9PT0gMSkge1xuICAgICAgeWllbGQgdGhpcy5fZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdElmRW1wdHk8VD4oc291cmNlOiBBc3luY0l0ZXJhYmxlPFQ+LCBkZWZhdWx0VmFsdWU6IFQpOiBBc3luY0l0ZXJhYmxlWDxUPiB7XG4gIHJldHVybiBuZXcgRGVmYXVsdElmRW1wdHlBc3luY0l0ZXJhYmxlPFQ+KHNvdXJjZSwgZGVmYXVsdFZhbHVlKTtcbn1cbiJdfQ==
