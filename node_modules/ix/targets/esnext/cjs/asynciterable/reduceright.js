Object.defineProperty(exports, "__esModule", { value: true });
const toarray_1 = require("./toarray");
async function reduceRight(source, accumulator, ...args) {
    let [seed] = args;
    const hasSeed = args.length === 1;
    let hasValue = false;
    const array = await toarray_1.toArray(source);
    for (let offset = array.length - 1; offset >= 0; offset--) {
        const item = array[offset];
        if (hasValue || (hasValue = hasSeed)) {
            seed = await accumulator(seed, item, offset);
        }
        else {
            seed = item;
            hasValue = true;
        }
    }
    if (hasSeed && !hasValue) {
        return seed;
    }
    if (!hasValue) {
        throw new Error('Sequence contains no elements');
    }
    return seed;
}
exports.reduceRight = reduceRight;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvcmVkdWNlcmlnaHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHVDQUFvQztBQVM3QixLQUFLLHNCQUNSLE1BQXdCLEVBQ3hCLFdBQW9FLEVBQ3BFLEdBQUcsSUFBZTtJQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO0lBQ2xCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO0lBQ2xDLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQztJQUNyQixNQUFNLEtBQUssR0FBRyxNQUFNLGlCQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDcEMsR0FBRyxDQUFDLENBQUMsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDO1FBQzFELE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMzQixFQUFFLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLElBQUksR0FBRyxNQUFNLFdBQVcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQy9DLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLElBQUksR0FBRyxJQUFJLENBQUM7WUFDWixRQUFRLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLENBQUM7SUFDSCxDQUFDO0lBRUQsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUN6QixNQUFNLENBQUMsSUFBSyxDQUFDO0lBQ2YsQ0FBQztJQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztJQUNuRCxDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUssQ0FBQztBQUNmLENBQUM7QUEzQkQsa0NBMkJDIiwiZmlsZSI6ImFzeW5jaXRlcmFibGUvcmVkdWNlcmlnaHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b0FycmF5IH0gZnJvbSAnLi90b2FycmF5JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZHVjZVJpZ2h0PFQ+KFxuICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VD4sXG4gIGFjY3VtdWxhdG9yOiAoYWNjOiBULCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gVCB8IFByb21pc2U8VD4pOiBQcm9taXNlPFQ+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZHVjZVJpZ2h0PFQsIFIgPSBUPihcbiAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFQ+LFxuICBhY2N1bXVsYXRvcjogKGFjYzogUiwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IFIgfCBQcm9taXNlPFI+LFxuICBzZWVkOiBSKTogUHJvbWlzZTxSPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWR1Y2VSaWdodDxULCBSID0gVD4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFQ+LFxuICAgIGFjY3VtdWxhdG9yOiAoYWNjOiBUIHwgUiwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IFIgfCBQcm9taXNlPFI+LFxuICAgIC4uLmFyZ3M6IChUIHwgUilbXSk6IFByb21pc2U8VCB8IFI+IHtcbiAgbGV0IFtzZWVkXSA9IGFyZ3M7XG4gIGNvbnN0IGhhc1NlZWQgPSBhcmdzLmxlbmd0aCA9PT0gMTtcbiAgbGV0IGhhc1ZhbHVlID0gZmFsc2U7XG4gIGNvbnN0IGFycmF5ID0gYXdhaXQgdG9BcnJheShzb3VyY2UpO1xuICBmb3IgKGxldCBvZmZzZXQgPSBhcnJheS5sZW5ndGggLSAxOyBvZmZzZXQgPj0gMDsgb2Zmc2V0LS0pIHtcbiAgICBjb25zdCBpdGVtID0gYXJyYXlbb2Zmc2V0XTtcbiAgICBpZiAoaGFzVmFsdWUgfHwgKGhhc1ZhbHVlID0gaGFzU2VlZCkpIHtcbiAgICAgIHNlZWQgPSBhd2FpdCBhY2N1bXVsYXRvcihzZWVkLCBpdGVtLCBvZmZzZXQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWVkID0gaXRlbTtcbiAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzU2VlZCAmJiAhaGFzVmFsdWUpIHtcbiAgICByZXR1cm4gc2VlZCE7XG4gIH1cblxuICBpZiAoIWhhc1ZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZXF1ZW5jZSBjb250YWlucyBubyBlbGVtZW50cycpO1xuICB9XG5cbiAgcmV0dXJuIHNlZWQhO1xufVxuIl19
