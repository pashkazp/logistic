Object.defineProperty(exports, "__esModule", { value: true });
const asynciterable_1 = require("../asynciterable");
class ThrottleAsyncIterable extends asynciterable_1.AsyncIterableX {
    constructor(source, time) {
        super();
        this._source = source;
        this._time = time;
    }
    async *[Symbol.asyncIterator]() {
        let currentTime, previousTime;
        for await (const item of this._source) {
            currentTime = Date.now();
            if (!previousTime || currentTime - previousTime > this._time) {
                previousTime = currentTime;
                yield item;
            }
        }
    }
}
function throttle(source, time) {
    return new ThrottleAsyncIterable(source, time);
}
exports.throttle = throttle;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvdGhyb3R0bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG9EQUFrRDtBQUVsRCwyQkFBcUMsU0FBUSw4QkFBdUI7SUFJbEUsWUFBWSxNQUE4QixFQUFFLElBQVk7UUFDdEQsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztJQUNwQixDQUFDO0lBRUQsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUMzQixJQUFJLFdBQVcsRUFBRSxZQUFZLENBQUM7UUFDOUIsR0FBRyxDQUFDLEtBQUssQ0FBTCxDQUFPLE1BQU0sSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3RDLFdBQVcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDekIsRUFBRSxDQUFDLENBQUMsQ0FBQyxZQUFZLElBQUksV0FBVyxHQUFHLFlBQVksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztnQkFDN0QsWUFBWSxHQUFHLFdBQVcsQ0FBQztnQkFDM0IsTUFBTSxJQUFJLENBQUM7WUFDYixDQUFDO1FBQ0gsQ0FBQztJQUNILENBQUM7Q0FDRjtBQUVELGtCQUFrQyxNQUE4QixFQUFFLElBQVk7SUFDNUUsTUFBTSxDQUFDLElBQUkscUJBQXFCLENBQVUsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzFELENBQUM7QUFGRCw0QkFFQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL3Rocm90dGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXN5bmNJdGVyYWJsZVggfSBmcm9tICcuLi9hc3luY2l0ZXJhYmxlJztcblxuY2xhc3MgVGhyb3R0bGVBc3luY0l0ZXJhYmxlPFRTb3VyY2U+IGV4dGVuZHMgQXN5bmNJdGVyYWJsZVg8VFNvdXJjZT4ge1xuICBwcml2YXRlIF9zb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT47XG4gIHByaXZhdGUgX3RpbWU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sIHRpbWU6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuX3RpbWUgPSB0aW1lO1xuICB9XG5cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgbGV0IGN1cnJlbnRUaW1lLCBwcmV2aW91c1RpbWU7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHRoaXMuX3NvdXJjZSkge1xuICAgICAgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgaWYgKCFwcmV2aW91c1RpbWUgfHwgY3VycmVudFRpbWUgLSBwcmV2aW91c1RpbWUgPiB0aGlzLl90aW1lKSB7XG4gICAgICAgIHByZXZpb3VzVGltZSA9IGN1cnJlbnRUaW1lO1xuICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGhyb3R0bGU8VFNvdXJjZT4oc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+LCB0aW1lOiBudW1iZXIpOiBBc3luY0l0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHJldHVybiBuZXcgVGhyb3R0bGVBc3luY0l0ZXJhYmxlPFRTb3VyY2U+KHNvdXJjZSwgdGltZSk7XG59XG4iXX0=
