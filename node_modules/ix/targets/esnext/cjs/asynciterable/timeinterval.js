Object.defineProperty(exports, "__esModule", { value: true });
const asynciterable_1 = require("../asynciterable");
class TimeIntervalAsyncIterable extends asynciterable_1.AsyncIterableX {
    constructor(source) {
        super();
        this._source = source;
    }
    async *[Symbol.asyncIterator]() {
        let last = Date.now();
        for await (let item of this._source) {
            const now = Date.now();
            const span = now - last;
            last = now;
            yield { value: item, elapsed: span };
        }
    }
}
function timeInterval(source) {
    return new TimeIntervalAsyncIterable(source);
}
exports.timeInterval = timeInterval;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvdGltZWludGVydmFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxvREFBa0Q7QUFPbEQsK0JBQXlDLFNBQVEsOEJBQXFDO0lBR3BGLFlBQVksTUFBOEI7UUFDeEMsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUN4QixDQUFDO0lBRUQsS0FBSyxFQUFFLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztRQUMzQixJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDdEIsR0FBRyxDQUFDLEtBQUssQ0FBTCxDQUFPLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztZQUN2QixNQUFNLElBQUksR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDO1lBQ3hCLElBQUksR0FBRyxHQUFHLENBQUM7WUFDWCxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsSUFBSSxFQUFFLENBQUM7UUFDdkMsQ0FBQztJQUNILENBQUM7Q0FDRjtBQUVELHNCQUNJLE1BQThCO0lBQ2hDLE1BQU0sQ0FBQyxJQUFJLHlCQUF5QixDQUFVLE1BQU0sQ0FBQyxDQUFDO0FBQ3hELENBQUM7QUFIRCxvQ0FHQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL3RpbWVpbnRlcnZhbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jSXRlcmFibGVYIH0gZnJvbSAnLi4vYXN5bmNpdGVyYWJsZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGltZUludGVydmFsPFQ+IHtcbiAgdmFsdWU6IFQ7XG4gIGVsYXBzZWQ6IG51bWJlcjtcbn1cblxuY2xhc3MgVGltZUludGVydmFsQXN5bmNJdGVyYWJsZTxUU291cmNlPiBleHRlbmRzIEFzeW5jSXRlcmFibGVYPFRpbWVJbnRlcnZhbDxUU291cmNlPj4ge1xuICBwcml2YXRlIF9zb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT47XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICBsZXQgbGFzdCA9IERhdGUubm93KCk7XG4gICAgZm9yIGF3YWl0IChsZXQgaXRlbSBvZiB0aGlzLl9zb3VyY2UpIHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBzcGFuID0gbm93IC0gbGFzdDtcbiAgICAgIGxhc3QgPSBub3c7XG4gICAgICB5aWVsZCB7IHZhbHVlOiBpdGVtLCBlbGFwc2VkOiBzcGFuIH07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aW1lSW50ZXJ2YWw8VFNvdXJjZT4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+KTogQXN5bmNJdGVyYWJsZVg8VGltZUludGVydmFsPFRTb3VyY2U+PiB7XG4gIHJldHVybiBuZXcgVGltZUludGVydmFsQXN5bmNJdGVyYWJsZTxUU291cmNlPihzb3VyY2UpO1xufSJdfQ==
