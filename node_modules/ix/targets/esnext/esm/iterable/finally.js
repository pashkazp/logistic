import { IterableX } from '../iterable';
class FinalyIterable extends IterableX {
    constructor(source, action) {
        super();
        this._source = source;
        this._action = action;
    }
    *[Symbol.iterator]() {
        try {
            yield* this._source;
        }
        finally {
            this._action();
        }
    }
}
/**
 * Creates a sequence whose termination or disposal of an iterator causes a finally action to be executed.
 * @param {Iterator<T>} source Source sequence
 * @param {function(): void)} action Action to run upon termination of the sequence, or when an iterator is disposed.
 * @return {Iterable<T>} Source sequence with guarantees on the invocation of the finally action.
 */
export function _finally(source, action) {
    return new FinalyIterable(source, action);
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL2ZpbmFsbHkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUV4QyxvQkFBOEIsU0FBUSxTQUFrQjtJQUl0RCxZQUFZLE1BQXlCLEVBQUUsTUFBa0I7UUFDdkQsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUN4QixDQUFDO0lBRUQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDaEIsSUFBSSxDQUFDO1lBQ0gsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7Z0JBQVMsQ0FBQztZQUNULElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNqQixDQUFDO0lBQ0gsQ0FBQztDQUNGO0FBRUQ7Ozs7O0dBS0c7QUFDSCxNQUFNLG1CQUNGLE1BQXlCLEVBQ3pCLE1BQWtCO0lBQ3BCLE1BQU0sQ0FBQyxJQUFJLGNBQWMsQ0FBVSxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDckQsQ0FBQyIsImZpbGUiOiJpdGVyYWJsZS9maW5hbGx5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSXRlcmFibGVYIH0gZnJvbSAnLi4vaXRlcmFibGUnO1xuXG5jbGFzcyBGaW5hbHlJdGVyYWJsZTxUU291cmNlPiBleHRlbmRzIEl0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHByaXZhdGUgX3NvdXJjZTogSXRlcmFibGU8VFNvdXJjZT47XG4gIHByaXZhdGUgX2FjdGlvbjogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+LCBhY3Rpb246ICgpID0+IHZvaWQpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgICB0aGlzLl9hY3Rpb24gPSBhY3Rpb247XG4gIH1cblxuICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgdHJ5IHtcbiAgICAgIHlpZWxkKiB0aGlzLl9zb3VyY2U7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuX2FjdGlvbigpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBzZXF1ZW5jZSB3aG9zZSB0ZXJtaW5hdGlvbiBvciBkaXNwb3NhbCBvZiBhbiBpdGVyYXRvciBjYXVzZXMgYSBmaW5hbGx5IGFjdGlvbiB0byBiZSBleGVjdXRlZC5cbiAqIEBwYXJhbSB7SXRlcmF0b3I8VD59IHNvdXJjZSBTb3VyY2Ugc2VxdWVuY2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZCl9IGFjdGlvbiBBY3Rpb24gdG8gcnVuIHVwb24gdGVybWluYXRpb24gb2YgdGhlIHNlcXVlbmNlLCBvciB3aGVuIGFuIGl0ZXJhdG9yIGlzIGRpc3Bvc2VkLlxuICogQHJldHVybiB7SXRlcmFibGU8VD59IFNvdXJjZSBzZXF1ZW5jZSB3aXRoIGd1YXJhbnRlZXMgb24gdGhlIGludm9jYXRpb24gb2YgdGhlIGZpbmFsbHkgYWN0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gX2ZpbmFsbHk8VFNvdXJjZT4oXG4gICAgc291cmNlOiBJdGVyYWJsZTxUU291cmNlPixcbiAgICBhY3Rpb246ICgpID0+IHZvaWQpOiBJdGVyYWJsZVg8VFNvdXJjZT4ge1xuICByZXR1cm4gbmV3IEZpbmFseUl0ZXJhYmxlPFRTb3VyY2U+KHNvdXJjZSwgYWN0aW9uKTtcbn1cbiJdfQ==
