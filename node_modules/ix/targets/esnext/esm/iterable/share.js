import { IterableX } from '../iterable';
import { create } from './create';
class SharedIterable extends IterableX {
    constructor(it) {
        super();
        this._it = it;
    }
    [Symbol.iterator]() {
        return this._it;
    }
}
export function share(source, fn) {
    return fn ?
        create(() => fn(new SharedIterable(source[Symbol.iterator]()))[Symbol.iterator]()) :
        new SharedIterable(source[Symbol.iterator]());
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL3NoYXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDeEMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUVsQyxvQkFBd0IsU0FBUSxTQUFZO0lBRzFDLFlBQVksRUFBZTtRQUN6QixLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDZixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0NBQ0Y7QUFNRCxNQUFNLGdCQUNGLE1BQXlCLEVBQ3pCLEVBQW9EO0lBQ3RELE1BQU0sQ0FBQyxFQUFFO1FBQ1AsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7UUFDbEYsSUFBSSxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbEQsQ0FBQyIsImZpbGUiOiJpdGVyYWJsZS9zaGFyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlWCB9IGZyb20gJy4uL2l0ZXJhYmxlJztcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJy4vY3JlYXRlJztcblxuY2xhc3MgU2hhcmVkSXRlcmFibGU8VD4gZXh0ZW5kcyBJdGVyYWJsZVg8VD4ge1xuICBwcml2YXRlIF9pdDogSXRlcmF0b3I8VD47XG5cbiAgY29uc3RydWN0b3IoaXQ6IEl0ZXJhdG9yPFQ+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9pdCA9IGl0O1xuICB9XG5cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2l0O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGFyZTxUU291cmNlPihzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+KTogSXRlcmFibGVYPFRTb3VyY2U+O1xuZXhwb3J0IGZ1bmN0aW9uIHNoYXJlPFRTb3VyY2UsIFRSZXN1bHQ+KFxuICAgIHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sXG4gICAgZm4/OiAodmFsdWU6IEl0ZXJhYmxlPFRTb3VyY2U+KSA9PiBJdGVyYWJsZTxUUmVzdWx0Pik6IEl0ZXJhYmxlWDxUUmVzdWx0PjtcbmV4cG9ydCBmdW5jdGlvbiBzaGFyZTxUU291cmNlLCBUUmVzdWx0PihcbiAgICBzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIGZuPzogKHZhbHVlOiBJdGVyYWJsZTxUU291cmNlPikgPT4gSXRlcmFibGU8VFJlc3VsdD4pOiBJdGVyYWJsZVg8VFNvdXJjZSB8IFRSZXN1bHQ+IHtcbiAgcmV0dXJuIGZuID9cbiAgICBjcmVhdGUoKCkgPT4gZm4obmV3IFNoYXJlZEl0ZXJhYmxlKHNvdXJjZVtTeW1ib2wuaXRlcmF0b3JdKCkpKVtTeW1ib2wuaXRlcmF0b3JdKCkpIDpcbiAgICBuZXcgU2hhcmVkSXRlcmFibGUoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0oKSk7XG59XG4iXX0=
