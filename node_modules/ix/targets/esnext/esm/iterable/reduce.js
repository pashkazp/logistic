export function reduce(source, fn, seed) {
    const hasSeed = arguments.length === 3;
    let i = 0, hasValue = false;
    for (let item of source) {
        if (hasValue || (hasValue = hasSeed)) {
            seed = fn(seed, item, i++);
        }
        else {
            seed = item;
            hasValue = true;
            i++;
        }
    }
    if (hasSeed && !hasValue) {
        return seed;
    }
    if (!hasValue) {
        throw new Error('Sequence contains no elements');
    }
    return seed;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL3JlZHVjZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxNQUFNLGlCQUNBLE1BQW1CLEVBQ25CLEVBQXNDLEVBQ3RDLElBQVk7SUFDaEIsTUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUM7SUFDdkMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLFFBQVEsR0FBRyxLQUFLLENBQUM7SUFDNUIsR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztRQUN4QixFQUFFLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JDLElBQUksR0FBRyxFQUFFLENBQUksSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1FBQ2hDLENBQUM7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLElBQUksR0FBRyxJQUFJLENBQUM7WUFDWixRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ2hCLENBQUMsRUFBRSxDQUFDO1FBQ04sQ0FBQztJQUNILENBQUM7SUFFRCxFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ3pCLE1BQU0sQ0FBQyxJQUFLLENBQUM7SUFDZixDQUFDO0lBRUQsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1FBQ2QsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCxNQUFNLENBQUMsSUFBSyxDQUFDO0FBQ2YsQ0FBQyIsImZpbGUiOiJpdGVyYWJsZS9yZWR1Y2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gcmVkdWNlPFQ+KHNvdXJjZTogSXRlcmFibGU8VD4sIGFjY3VtdWxhdG9yOiAoYWNjOiBULCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gVCwgc2VlZD86IFQpOiBUO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxUPihzb3VyY2U6IEl0ZXJhYmxlPFQ+LCBhY2N1bXVsYXRvcjogKGFjYzogVFtdLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gVFtdLCBzZWVkPzogVFtdKTogVFtdO1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxULCBSPihzb3VyY2U6IEl0ZXJhYmxlPFQ+LCBhY2N1bXVsYXRvcjogKGFjYzogUiwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IFIsIHNlZWQ/OiBSKTogUjtcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZTxULCBSPihcbiAgICAgIHNvdXJjZTogSXRlcmFibGU8VD4sXG4gICAgICBmbjogKGFjYzogUiwgeDogVCwgaW5kZXg6IG51bWJlcikgPT4gUixcbiAgICAgIHNlZWQ/OiBUIHwgUik6IFQgfCBSIHtcbiAgY29uc3QgaGFzU2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDM7XG4gIGxldCBpID0gMCwgaGFzVmFsdWUgPSBmYWxzZTtcbiAgZm9yIChsZXQgaXRlbSBvZiBzb3VyY2UpIHtcbiAgICBpZiAoaGFzVmFsdWUgfHwgKGhhc1ZhbHVlID0gaGFzU2VlZCkpIHtcbiAgICAgIHNlZWQgPSBmbig8Uj5zZWVkLCBpdGVtLCBpKyspO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZWVkID0gaXRlbTtcbiAgICAgIGhhc1ZhbHVlID0gdHJ1ZTtcbiAgICAgIGkrKztcbiAgICB9XG4gIH1cblxuICBpZiAoaGFzU2VlZCAmJiAhaGFzVmFsdWUpIHtcbiAgICByZXR1cm4gc2VlZCE7XG4gIH1cblxuICBpZiAoIWhhc1ZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZXF1ZW5jZSBjb250YWlucyBubyBlbGVtZW50cycpO1xuICB9XG5cbiAgcmV0dXJuIHNlZWQhO1xufVxuIl19
