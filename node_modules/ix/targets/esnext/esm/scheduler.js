class ActionSubscription {
    constructor(action) {
        this.isUnsubscribed = false;
        this._action = action;
    }
    unsubscribe() {
        if (!this.isUnsubscribed) {
            this.isUnsubscribed = true;
            this._action();
        }
    }
}
export class DefaultScheduler {
    get now() {
        return Date.now();
    }
    delay(dueTime) {
        return new Promise(res => setTimeout(res, dueTime));
    }
    schedule(action, dueTime) {
        const id = setTimeout(() => action(), dueTime);
        return new ActionSubscription(() => clearTimeout(id));
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFVQTtJQUlFLFlBQVksTUFBa0I7UUFIdkIsbUJBQWMsR0FBRyxLQUFLLENBQUM7UUFJNUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDeEIsQ0FBQztJQUVELFdBQVc7UUFDVCxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDO1lBQzNCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNqQixDQUFDO0lBQ0gsQ0FBQztDQUNGO0FBRUQsTUFBTTtJQUNKLElBQUksR0FBRztRQUNMLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDcEIsQ0FBQztJQUVELEtBQUssQ0FBQyxPQUFlO1FBQ25CLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBTyxHQUFHLElBQUksVUFBVSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQzVELENBQUM7SUFFRCxRQUFRLENBQUMsTUFBa0IsRUFBRSxPQUFlO1FBQzFDLE1BQU0sRUFBRSxHQUFHLFVBQVUsQ0FBQyxNQUFNLE1BQU0sRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQy9DLE1BQU0sQ0FBQyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDeEQsQ0FBQztDQUNGIiwiZmlsZSI6InNjaGVkdWxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vc3Vic2NyaXB0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBTY2hlZHVsZXIge1xuICByZWFkb25seSBub3c6IG51bWJlcjtcbiAgZGVsYXkodGltZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPjtcbiAgc2NoZWR1bGUoXG4gICAgYWN0aW9uOiAoKSA9PiB2b2lkLFxuICAgIGR1ZVRpbWU6IG51bWJlcik6IFN1YnNjcmlwdGlvbjtcbn1cblxuY2xhc3MgQWN0aW9uU3Vic2NyaXB0aW9uIGltcGxlbWVudHMgU3Vic2NyaXB0aW9uIHtcbiAgcHVibGljIGlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gIHByaXZhdGUgX2FjdGlvbjogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihhY3Rpb246ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9hY3Rpb24gPSBhY3Rpb247XG4gIH1cblxuICB1bnN1YnNjcmliZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYWN0aW9uKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2NoZWR1bGVyIGltcGxlbWVudHMgU2NoZWR1bGVyIHtcbiAgZ2V0IG5vdygpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIGRlbGF5KGR1ZVRpbWU6IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXMgPT4gc2V0VGltZW91dChyZXMsIGR1ZVRpbWUpKTtcbiAgfVxuXG4gIHNjaGVkdWxlKGFjdGlvbjogKCkgPT4gdm9pZCwgZHVlVGltZTogbnVtYmVyKTogU3Vic2NyaXB0aW9uIHtcbiAgICBjb25zdCBpZCA9IHNldFRpbWVvdXQoKCkgPT4gYWN0aW9uKCksIGR1ZVRpbWUpO1xuICAgIHJldHVybiBuZXcgQWN0aW9uU3Vic2NyaXB0aW9uKCgpID0+IGNsZWFyVGltZW91dChpZCkpO1xuICB9XG59Il19
