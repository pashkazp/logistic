import { identityAsync } from '../internal/identity';
export async function max(source, selector = identityAsync) {
    let atleastOnce = false;
    let value = -Infinity;
    for await (let item of source) {
        if (!atleastOnce) {
            atleastOnce = true;
        }
        let x = await selector(item);
        if (x > value) {
            value = x;
        }
    }
    if (!atleastOnce) {
        throw new Error('Sequence contains no elements');
    }
    return value;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvbWF4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQVFyRCxNQUFNLENBQUMsS0FBSyxjQUNSLE1BQTBCLEVBQzFCLFdBQWlELGFBQWE7SUFDaEUsSUFBSSxXQUFXLEdBQUcsS0FBSyxDQUFDO0lBQ3hCLElBQUksS0FBSyxHQUFHLENBQUMsUUFBUSxDQUFDO0lBQ3RCLEdBQUcsQ0FBQyxLQUFLLENBQUwsQ0FBTyxJQUFJLElBQUksSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQzlCLEVBQUUsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQztZQUNqQixXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ3JCLENBQUM7UUFDRCxJQUFJLENBQUMsR0FBRyxNQUFNLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3QixFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDLENBQUMsQ0FBQztZQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7UUFBQyxDQUFDO0lBQy9CLENBQUM7SUFDRCxFQUFFLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7UUFDakIsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0lBQ25ELENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSyxDQUFDO0FBQ2YsQ0FBQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL21heC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlkZW50aXR5QXN5bmMgfSBmcm9tICcuLi9pbnRlcm5hbC9pZGVudGl0eSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXgoXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPG51bWJlcj4sXG4gICAgc2VsZWN0b3I/OiAoeDogbnVtYmVyKSA9PiBudW1iZXIgfCBQcm9taXNlPG51bWJlcj4pOiBQcm9taXNlPG51bWJlcj47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbWF4PFQ+KFxuICAgIHNvdXJjZTogQXN5bmNJdGVyYWJsZTxUPixcbiAgICBzZWxlY3RvcjogKHg6IFQpID0+IG51bWJlciB8IFByb21pc2U8bnVtYmVyPik6IFByb21pc2U8bnVtYmVyPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtYXgoXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPGFueT4sXG4gICAgc2VsZWN0b3I6ICh4OiBhbnkpID0+IG51bWJlciB8IFByb21pc2U8bnVtYmVyPiA9IGlkZW50aXR5QXN5bmMpOiBQcm9taXNlPG51bWJlcj4ge1xuICBsZXQgYXRsZWFzdE9uY2UgPSBmYWxzZTtcbiAgbGV0IHZhbHVlID0gLUluZmluaXR5O1xuICBmb3IgYXdhaXQgKGxldCBpdGVtIG9mIHNvdXJjZSkge1xuICAgIGlmICghYXRsZWFzdE9uY2UpIHtcbiAgICAgIGF0bGVhc3RPbmNlID0gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IHggPSBhd2FpdCBzZWxlY3RvcihpdGVtKTtcbiAgICBpZiAoeCA+IHZhbHVlKSB7IHZhbHVlID0geDsgfVxuICB9XG4gIGlmICghYXRsZWFzdE9uY2UpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG5vIGVsZW1lbnRzJyk7XG4gIH1cblxuICByZXR1cm4gdmFsdWU7XG59XG4iXX0=
