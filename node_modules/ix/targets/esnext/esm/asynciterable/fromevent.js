import { fromEventPattern } from './fromeventpattern';
function isNodeEventEmitter(obj) {
    return !!obj && typeof obj.addListener === 'function' && typeof obj.removeListener === 'function';
}
function isEventTarget(obj) {
    return !!obj && typeof obj.addEventListener === 'function' && typeof obj.removeEventListener === 'function';
}
export function fromEvent(obj, type, options) {
    if (isEventTarget(obj)) {
        const target = (obj);
        return fromEventPattern(h => target.addEventListener(type, (h), options), h => target.removeEventListener(type, (h), options));
    }
    else if (isNodeEventEmitter(obj)) {
        const target = (obj);
        return fromEventPattern(h => target.addListener(type, h), h => target.removeListener(type, h));
    }
    else {
        throw new TypeError('Unsupported event target');
    }
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvZnJvbWV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBZXRELDRCQUE0QixHQUFRO0lBQ2xDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLE9BQU8sR0FBRyxDQUFDLFdBQVcsS0FBSyxVQUFVLElBQUksT0FBTyxHQUFHLENBQUMsY0FBYyxLQUFLLFVBQVUsQ0FBQztBQUNwRyxDQUFDO0FBRUQsdUJBQXVCLEdBQVE7SUFDN0IsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksT0FBTyxHQUFHLENBQUMsZ0JBQWdCLEtBQUssVUFBVSxJQUFJLE9BQU8sR0FBRyxDQUFDLG1CQUFtQixLQUFLLFVBQVUsQ0FBQztBQUM5RyxDQUFDO0FBRUQsTUFBTSxvQkFDRixHQUFrQixFQUNsQixJQUFZLEVBQ1osT0FBOEI7SUFDaEMsRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixNQUFNLE1BQU0sR0FBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxNQUFNLENBQUMsZ0JBQWdCLENBQ3JCLENBQUMsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUMvRCxDQUFDLElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLElBQUksRUFBaUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FDbkUsQ0FBQztJQUNKLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sTUFBTSxHQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FDckIsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUNoQyxDQUFDLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQ3BDLENBQUM7SUFDSixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDTixNQUFNLElBQUksU0FBUyxDQUFDLDBCQUEwQixDQUFDLENBQUM7SUFDbEQsQ0FBQztBQUNILENBQUMiLCJmaWxlIjoiYXN5bmNpdGVyYWJsZS9mcm9tZXZlbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmcm9tRXZlbnRQYXR0ZXJuIH0gZnJvbSAnLi9mcm9tZXZlbnRwYXR0ZXJuJztcblxuZXhwb3J0IHR5cGUgTm9kZUV2ZW50RW1pdHRlciAgPSB7XG4gIGFkZExpc3RlbmVyOiAoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICByZW1vdmVMaXN0ZW5lcjogKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCB0eXBlIEV2ZW50TGlzdGVuZXJPcHRpb25zID0ge1xuICBjYXB0dXJlPzogYm9vbGVhbjtcbiAgcGFzc2l2ZT86IGJvb2xlYW47XG4gIG9uY2U/OiBib29sZWFuO1xufSB8IGJvb2xlYW47XG5cbmV4cG9ydCB0eXBlIEV2ZW50ZWRUYXJnZXQgPSBFdmVudFRhcmdldCB8IE5vZGVFdmVudEVtaXR0ZXI7XG5cbmZ1bmN0aW9uIGlzTm9kZUV2ZW50RW1pdHRlcihvYmo6IGFueSk6IG9iaiBpcyBOb2RlRXZlbnRFbWl0dGVyIHtcbiAgcmV0dXJuICEhb2JqICYmIHR5cGVvZiBvYmouYWRkTGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZnVuY3Rpb24gaXNFdmVudFRhcmdldChvYmo6IGFueSk6IG9iaiBpcyBFdmVudFRhcmdldCB7XG4gIHJldHVybiAhIW9iaiAmJiB0eXBlb2Ygb2JqLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5yZW1vdmVFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZnJvbUV2ZW50PFRTb3VyY2U+KFxuICAgIG9iajogRXZlbnRlZFRhcmdldCxcbiAgICB0eXBlOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IEV2ZW50TGlzdGVuZXJPcHRpb25zKSB7XG4gIGlmIChpc0V2ZW50VGFyZ2V0KG9iaikpIHtcbiAgICBjb25zdCB0YXJnZXQgPSA8RXZlbnRUYXJnZXQ+KG9iaik7XG4gICAgcmV0dXJuIGZyb21FdmVudFBhdHRlcm48VFNvdXJjZT4oXG4gICAgICBoID0+IHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIDxFdmVudExpc3RlbmVyPihoKSwgb3B0aW9ucyksXG4gICAgICBoID0+IHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIDxFdmVudExpc3RlbmVyPihoKSwgb3B0aW9ucylcbiAgICApO1xuICB9IGVsc2UgaWYgKGlzTm9kZUV2ZW50RW1pdHRlcihvYmopKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gPE5vZGVFdmVudEVtaXR0ZXI+KG9iaik7XG4gICAgcmV0dXJuIGZyb21FdmVudFBhdHRlcm48VFNvdXJjZT4oXG4gICAgICBoID0+IHRhcmdldC5hZGRMaXN0ZW5lcih0eXBlLCBoKSxcbiAgICAgIGggPT4gdGFyZ2V0LnJlbW92ZUxpc3RlbmVyKHR5cGUsIGgpXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbnN1cHBvcnRlZCBldmVudCB0YXJnZXQnKTtcbiAgfVxufVxuIl19
