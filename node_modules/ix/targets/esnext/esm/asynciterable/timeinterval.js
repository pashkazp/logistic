import { AsyncIterableX } from '../asynciterable';
class TimeIntervalAsyncIterable extends AsyncIterableX {
    constructor(source) {
        super();
        this._source = source;
    }
    async *[Symbol.asyncIterator]() {
        let last = Date.now();
        for await (let item of this._source) {
            const now = Date.now();
            const span = now - last;
            last = now;
            yield { value: item, elapsed: span };
        }
    }
}
export function timeInterval(source) {
    return new TimeIntervalAsyncIterable(source);
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvdGltZWludGVydmFsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQU9sRCwrQkFBeUMsU0FBUSxjQUFxQztJQUdwRixZQUFZLE1BQThCO1FBQ3hDLEtBQUssRUFBRSxDQUFDO1FBQ1IsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDeEIsQ0FBQztJQUVELEtBQUssRUFBRSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUM7UUFDM0IsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQ3RCLEdBQUcsQ0FBQyxLQUFLLENBQUwsQ0FBTyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztZQUNwQyxNQUFNLEdBQUcsR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7WUFDdkIsTUFBTSxJQUFJLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztZQUN4QixJQUFJLEdBQUcsR0FBRyxDQUFDO1lBQ1gsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQ3ZDLENBQUM7SUFDSCxDQUFDO0NBQ0Y7QUFFRCxNQUFNLHVCQUNGLE1BQThCO0lBQ2hDLE1BQU0sQ0FBQyxJQUFJLHlCQUF5QixDQUFVLE1BQU0sQ0FBQyxDQUFDO0FBQ3hELENBQUMiLCJmaWxlIjoiYXN5bmNpdGVyYWJsZS90aW1laW50ZXJ2YWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBc3luY0l0ZXJhYmxlWCB9IGZyb20gJy4uL2FzeW5jaXRlcmFibGUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRpbWVJbnRlcnZhbDxUPiB7XG4gIHZhbHVlOiBUO1xuICBlbGFwc2VkOiBudW1iZXI7XG59XG5cbmNsYXNzIFRpbWVJbnRlcnZhbEFzeW5jSXRlcmFibGU8VFNvdXJjZT4gZXh0ZW5kcyBBc3luY0l0ZXJhYmxlWDxUaW1lSW50ZXJ2YWw8VFNvdXJjZT4+IHtcbiAgcHJpdmF0ZSBfc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+O1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTogQXN5bmNJdGVyYWJsZTxUU291cmNlPikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICB9XG5cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgbGV0IGxhc3QgPSBEYXRlLm5vdygpO1xuICAgIGZvciBhd2FpdCAobGV0IGl0ZW0gb2YgdGhpcy5fc291cmNlKSB7XG4gICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3Qgc3BhbiA9IG5vdyAtIGxhc3Q7XG4gICAgICBsYXN0ID0gbm93O1xuICAgICAgeWllbGQgeyB2YWx1ZTogaXRlbSwgZWxhcHNlZDogc3BhbiB9O1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGltZUludGVydmFsPFRTb3VyY2U+KFxuICAgIHNvdXJjZTogQXN5bmNJdGVyYWJsZTxUU291cmNlPik6IEFzeW5jSXRlcmFibGVYPFRpbWVJbnRlcnZhbDxUU291cmNlPj4ge1xuICByZXR1cm4gbmV3IFRpbWVJbnRlcnZhbEFzeW5jSXRlcmFibGU8VFNvdXJjZT4oc291cmNlKTtcbn0iXX0=
