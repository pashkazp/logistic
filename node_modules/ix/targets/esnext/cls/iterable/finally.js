goog.module('targets.esnext.cls.iterable.finally'); exports = {}; var module = {id: 'targets/esnext/cls/iterable/finally.js'};/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

var iterable_1 = goog.require('targets.esnext.cls.iterable');
const tsickle_forward_declare_1 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.iterable");
/**
 * @template TSource
 */
class FinalyIterable extends iterable_1.IterableX {
    /**
     * @param {!Iterable<TSource>} source
     * @param {function(): void} action
     */
    constructor(source, action) {
        super();
        this._source = source;
        this._action = action;
    }
    /**
     * @return {!IterableIterator<TSource>}
     */
    *[Symbol.iterator]() {
        try {
            yield* this._source;
        }
        finally {
            this._action();
        }
    }
}
function FinalyIterable_tsickle_Closure_declarations() {
    /** @type {!Iterable<TSource>} */
    FinalyIterable.prototype._source;
    /** @type {function(): void} */
    FinalyIterable.prototype._action;
}
/**
 * Creates a sequence whose termination or disposal of an iterator causes a finally action to be executed.
 * @template TSource
 * @param {!Iterable<TSource>} source
 * @param {function(): void} action
 * @return {!tsickle_forward_declare_1.IterableX<TSource>}
 */
function _finally(source, action) {
    return new FinalyIterable(source, action);
}
exports._finally = _finally;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9pdGVyYWJsZS9maW5hbGx5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7R0FHRzs7QUFFSCwwQ0FMa0I7QUFNbEIsTUFBTSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLHNDQUFzQyxDQUFDLENBQUM7QUFDOUY7O0dBRUc7QUFQSCxvQkFBNkIsU0FBUSxvQkFBbUI7SUFXeEQ7OztPQUdHO0lBVkQsWUFBWSxNQUF5QixFQUFDLE1BQW1CO1FBWXZELEtBWEssRUFBRSxDQUFDO1FBWVIsSUFYSSxDQUFDLE9BQU8sR0FBRSxNQUFPLENBQUM7UUFZdEIsSUFYSSxDQUFDLE9BQU8sR0FBRSxNQUFPLENBQUM7SUFZeEIsQ0FBQztJQUNIOztPQUVHO0lBWkQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFjaEIsSUFiRyxDQUFFO1lBY0gsT0FiTSxJQUFLLENBQUMsT0FBTyxDQUFDO1FBY3RCLENBYkM7Z0JBQVEsQ0FBRTtZQWNULElBYkksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQWNqQixDQWJDO0lBY0gsQ0FiQztDQUNIO0FBZUE7SUFDQSxpQ0FBaUM7SUFDakMsY0FBYyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUM7SUFDakMsK0JBQStCO0lBQy9CLGNBQWMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDO0FBQ2pDLENBQUM7QUFFRDs7Ozs7O0dBTUc7QUFwQkgsa0JBc0JJLE1BckJ5QixFQXNCekIsTUFyQmtCO0lBc0JwQixNQXJCTSxDQUFBLElBQUksY0FBZSxDQUFVLE1BQU0sRUFBQyxNQUFPLENBQUMsQ0FBQztBQXNCckQsQ0FyQkM7QUFKRCw0QkFJQyIsImZpbGUiOiJmaW5hbGx5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cblxuaW1wb3J0IHsgSXRlcmFibGVYIH0gZnJvbSAnLi4vaXRlcmFibGUnO1xuY29uc3QgdHNpY2tsZV9mb3J3YXJkX2RlY2xhcmVfMSA9IGdvb2cuZm9yd2FyZERlY2xhcmUoXCJfVXNlcnMucHRheWxvci5kZXYuaXhqcy5zcmMuaXRlcmFibGVcIik7XG4vKipcbiAqIEB0ZW1wbGF0ZSBUU291cmNlXG4gKi9cbmNsYXNzIEZpbmFseUl0ZXJhYmxlPFRTb3VyY2U+IGV4dGVuZHMgSXRlcmFibGVYPFRTb3VyY2U+IHtcbnByaXZhdGUgX3NvdXJjZTogSXRlcmFibGU8VFNvdXJjZT47XG5wcml2YXRlIF9hY3Rpb246ICgpID0+IHZvaWQ7XG4vKipcbiAqIEBwYXJhbSB7IUl0ZXJhYmxlPFRTb3VyY2U+fSBzb3VyY2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKTogdm9pZH0gYWN0aW9uXG4gKi9cbmNvbnN0cnVjdG9yKHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sIGFjdGlvbjogKCkgPT4gdm9pZCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcbiAgfVxuLyoqXG4gKiBAcmV0dXJuIHshSXRlcmFibGVJdGVyYXRvcjxUU291cmNlPn1cbiAqL1xuKltTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHRyeSB7XG4gICAgICB5aWVsZCogdGhpcy5fc291cmNlO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLl9hY3Rpb24oKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gRmluYWx5SXRlcmFibGVfdHNpY2tsZV9DbG9zdXJlX2RlY2xhcmF0aW9ucygpIHtcbi8qKiBAdHlwZSB7IUl0ZXJhYmxlPFRTb3VyY2U+fSAqL1xuRmluYWx5SXRlcmFibGUucHJvdG90eXBlLl9zb3VyY2U7XG4vKiogQHR5cGUge2Z1bmN0aW9uKCk6IHZvaWR9ICovXG5GaW5hbHlJdGVyYWJsZS5wcm90b3R5cGUuX2FjdGlvbjtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc2VxdWVuY2Ugd2hvc2UgdGVybWluYXRpb24gb3IgZGlzcG9zYWwgb2YgYW4gaXRlcmF0b3IgY2F1c2VzIGEgZmluYWxseSBhY3Rpb24gdG8gYmUgZXhlY3V0ZWQuXG4gKiBAdGVtcGxhdGUgVFNvdXJjZVxuICogQHBhcmFtIHshSXRlcmFibGU8VFNvdXJjZT59IHNvdXJjZVxuICogQHBhcmFtIHtmdW5jdGlvbigpOiB2b2lkfSBhY3Rpb25cbiAqIEByZXR1cm4geyF0c2lja2xlX2ZvcndhcmRfZGVjbGFyZV8xLkl0ZXJhYmxlWDxUU291cmNlPn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIF9maW5hbGx5PFRTb3VyY2U+KFxuICAgIHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sXG4gICAgYWN0aW9uOiAoKSA9PiB2b2lkKTogSXRlcmFibGVYPFRTb3VyY2U+IHtcbiAgcmV0dXJuIG5ldyBGaW5hbHlJdGVyYWJsZTxUU291cmNlPihzb3VyY2UsIGFjdGlvbik7XG59XG4iXX0=