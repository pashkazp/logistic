goog.module('targets.esnext.cls.asynciterable._grouping'); exports = {}; var module = {id: 'targets/esnext/cls/asynciterable/_grouping.js'};/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @ignore
 * @template TSource, TKey, TValue
 * @param {!AsyncIterable<TSource>} source
 * @param {function(TSource): (TKey|!Promise<TKey>)} keySelector
 * @param {function(TSource): (TValue|!Promise<TValue>)} elementSelector
 * @return {!Promise<!Map<TKey, !Array<TValue>>>}
 */
async function createGrouping(source, keySelector, elementSelector) {
    let /** @type {!Map<TKey, !Array<TValue>>} */ map = new Map();
    for await (let /** @type {TSource} */ item of source) {
        let /** @type {TKey} */ key = await keySelector(item);
        let /** @type {!Array<TValue>} */ grouping = map.get(key);
        if (!map.has(key)) {
            grouping = [];
            map.set(key, grouping);
        }
        let /** @type {TValue} */ element = await elementSelector(item); /** @type {!Array<TValue>} */
        ((grouping)).push(element);
    }
    return map;
}
exports.createGrouping = createGrouping;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hc3luY2l0ZXJhYmxlL19ncm91cGluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0dBR0c7O0FBR0g7Ozs7Ozs7R0FPRztBQVZHLEtBQU0seUJBWVIsTUFYOEIsRUFZOUIsV0FYcUQsRUFZckQsZUFYNkQ7SUFZL0QsSUFBSSx5Q0FYRCxDQUFBLEdBQUksR0FBRSxJQUFJLEdBQUksRUFBa0IsQ0FBQztJQVlwQyxHQVhHLENBQUEsS0FBTSxDQUFOLENBQVEsSUFBQSxzQkFBRyxDQUFBLElBQUssSUFBRyxNQUFPLENBQUMsQ0FBQSxDQUFFO1FBWTlCLElBQUksbUJBWEQsQ0FBQSxHQUFJLEdBQUUsTUFBTSxXQUFZLENBQUMsSUFBSSxDQUFDLENBQUM7UUFZbEMsSUFBSSw2QkFYRCxDQUFBLFFBQVMsR0FBRSxHQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBWTVCLEVBQUUsQ0FBQyxDQVhDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBLENBQUU7WUFZbEIsUUFYUSxHQUFFLEVBQUcsQ0FBQztZQVlkLEdBWEcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFDLFFBQVMsQ0FBQyxDQUFDO1FBWXpCLENBWEM7UUFZRCxJQUFJLHFCQVhELENBQUEsT0FBUSxHQUFFLE1BQU0sZUFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQSxDQUFBLDZCQUFBO1FBQUEsQ0FBQSxDQVl6QyxRQUFRLENBQUMsQ0FYQSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQVkxQixDQVhDO0lBYUQsTUFYTSxDQUFBLEdBQUksQ0FBQztBQVliLENBWEM7QUFqQkQsd0NBaUJDIiwiZmlsZSI6Il9ncm91cGluZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xuICovXG5cblxuLyoqXG4gKiBAaWdub3JlXG4gKiBAdGVtcGxhdGUgVFNvdXJjZSwgVEtleSwgVFZhbHVlXG4gKiBAcGFyYW0geyFBc3luY0l0ZXJhYmxlPFRTb3VyY2U+fSBzb3VyY2VcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVFNvdXJjZSk6IChUS2V5fCFQcm9taXNlPFRLZXk+KX0ga2V5U2VsZWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVFNvdXJjZSk6IChUVmFsdWV8IVByb21pc2U8VFZhbHVlPil9IGVsZW1lbnRTZWxlY3RvclxuICogQHJldHVybiB7IVByb21pc2U8IU1hcDxUS2V5LCAhQXJyYXk8VFZhbHVlPj4+fVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlR3JvdXBpbmc8VFNvdXJjZSwgVEtleSwgVFZhbHVlPihcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sXG4gICAga2V5U2VsZWN0b3I6ICh2YWx1ZTogVFNvdXJjZSkgPT4gVEtleSB8IFByb21pc2U8VEtleT4sXG4gICAgZWxlbWVudFNlbGVjdG9yOiAodmFsdWU6IFRTb3VyY2UpID0+IFRWYWx1ZSB8IFByb21pc2U8VFZhbHVlPik6IFByb21pc2U8TWFwPFRLZXksIFRWYWx1ZVtdPj4ge1xuICBsZXQgLyoqIEB0eXBlIHshTWFwPFRLZXksICFBcnJheTxUVmFsdWU+Pn0gKi8gbWFwID0gbmV3IE1hcDxUS2V5LCBUVmFsdWVbXT4oKTtcbiAgZm9yIGF3YWl0IChsZXQgLyoqIEB0eXBlIHtUU291cmNlfSAqLyBpdGVtIG9mIHNvdXJjZSkge1xuICAgIGxldCAvKiogQHR5cGUge1RLZXl9ICovIGtleSA9IGF3YWl0IGtleVNlbGVjdG9yKGl0ZW0pO1xuICAgIGxldCAvKiogQHR5cGUgeyFBcnJheTxUVmFsdWU+fSAqLyBncm91cGluZyA9IG1hcC5nZXQoa2V5KTtcbiAgICBpZiAoIW1hcC5oYXMoa2V5KSkge1xuICAgICAgZ3JvdXBpbmcgPSBbXTtcbiAgICAgIG1hcC5zZXQoa2V5LCBncm91cGluZyk7XG4gICAgfVxuICAgIGxldCAvKiogQHR5cGUge1RWYWx1ZX0gKi8gZWxlbWVudCA9IGF3YWl0IGVsZW1lbnRTZWxlY3RvcihpdGVtKTsgLyoqIEB0eXBlIHshQXJyYXk8VFZhbHVlPn0gKi8oKFxuICAgIGdyb3VwaW5nKSkucHVzaChlbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiBtYXA7XG59XG4iXX0=