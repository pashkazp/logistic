goog.module('targets.esnext.cls.asynciterable.tomap'); exports = {}; var module = {id: 'targets/esnext/cls/asynciterable/tomap.js'};/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

var identity_1 = goog.require('targets.esnext.cls.internal.identity');
const tsickle_forward_declare_1 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.internal.identity");
/**
 * @template TSource, TKey, TElement
 * @param {!AsyncIterable<TSource>} source
 * @param {function(TSource): (TKey|!Promise<TKey>)} keySelector
 * @param {function(TSource): (TElement|!Promise<TElement>)=} elementSelector
 * @return {!Promise<!Map<TKey, (TSource|TElement)>>}
 */
async function toMap(source, keySelector, elementSelector = identity_1.identityAsync) {
    let /** @type {!Map<TKey, (TSource|TElement)>} */ map = new Map();
    for await (let /** @type {TSource} */ item of source) {
        let /** @type {TElement} */ value = await elementSelector(item);
        let /** @type {TKey} */ key = await keySelector(item);
        map.set(key, value);
    }
    return map;
}
exports.toMap = toMap;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hc3luY2l0ZXJhYmxlL3RvbWFwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7R0FHRzs7QUFFSCxtREFMc0I7QUFNdEIsTUFBTSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLCtDQUErQyxDQUFDLENBTmpEO0FBZXJEOzs7Ozs7R0FNRztBQVpHLEtBQU0sZ0JBY1IsTUFiOEIsRUFjOUIsV0Fib0QsRUFjcEQsa0JBYmtFLHdCQUFjO0lBZWxGLElBQUksNkNBYkQsQ0FBQSxHQUFJLEdBQUUsSUFBSSxHQUFJLEVBQTRCLENBQUM7SUFjOUMsR0FiRyxDQUFBLEtBQU0sQ0FBTixDQUFRLElBQUEsc0JBQUcsQ0FBQSxJQUFLLElBQUcsTUFBTyxDQUFDLENBQUEsQ0FBRTtRQWM5QixJQUFJLHVCQWJELENBQUEsS0FBTSxHQUFFLE1BQU0sZUFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQWN4QyxJQUFJLG1CQWJELENBQUEsR0FBSSxHQUFFLE1BQU0sV0FBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBY2xDLEdBYkcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFDLEtBQU0sQ0FBQyxDQUFDO0lBY3RCLENBYkM7SUFjRCxNQWJNLENBQUEsR0FBSSxDQUFDO0FBY2IsQ0FiQztBQVpELHNCQVlDIiwiZmlsZSI6InRvbWFwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBhZGRlZCBieSB0c2lja2xlXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9IGNoZWNrZWQgYnkgdHNjXG4gKi9cblxuaW1wb3J0IHsgaWRlbnRpdHlBc3luYyB9IGZyb20gJy4uL2ludGVybmFsL2lkZW50aXR5JztcbmNvbnN0IHRzaWNrbGVfZm9yd2FyZF9kZWNsYXJlXzEgPSBnb29nLmZvcndhcmREZWNsYXJlKFwiX1VzZXJzLnB0YXlsb3IuZGV2Lml4anMuc3JjLmludGVybmFsLmlkZW50aXR5XCIpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9NYXA8VFNvdXJjZSwgVEtleT4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSB8IFByb21pc2U8VEtleT4pOiBQcm9taXNlPE1hcDxUS2V5LCBUU291cmNlPj47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9NYXA8VFNvdXJjZSwgVEtleSwgVEVsZW1lbnQgPSBUU291cmNlPihcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sXG4gICAga2V5U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBUS2V5IHwgUHJvbWlzZTxUS2V5PixcbiAgICBlbGVtZW50U2VsZWN0b3I/OiAoaXRlbTogVFNvdXJjZSkgPT4gVEVsZW1lbnQgfCBQcm9taXNlPFRFbGVtZW50Pik6IFByb21pc2U8TWFwPFRLZXksIFRFbGVtZW50Pj47XG4vKipcbiAqIEB0ZW1wbGF0ZSBUU291cmNlLCBUS2V5LCBURWxlbWVudFxuICogQHBhcmFtIHshQXN5bmNJdGVyYWJsZTxUU291cmNlPn0gc291cmNlXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFRTb3VyY2UpOiAoVEtleXwhUHJvbWlzZTxUS2V5Pil9IGtleVNlbGVjdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFRTb3VyY2UpOiAoVEVsZW1lbnR8IVByb21pc2U8VEVsZW1lbnQ+KT19IGVsZW1lbnRTZWxlY3RvclxuICogQHJldHVybiB7IVByb21pc2U8IU1hcDxUS2V5LCAoVFNvdXJjZXxURWxlbWVudCk+Pn1cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvTWFwPFRTb3VyY2UsIFRLZXksIFRFbGVtZW50ID0gVFNvdXJjZT4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSB8IFByb21pc2U8VEtleT4sXG4gICAgZWxlbWVudFNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEVsZW1lbnQgfCBQcm9taXNlPFRFbGVtZW50PiA9IGlkZW50aXR5QXN5bmMpOlxuICAgIFByb21pc2U8TWFwPFRLZXksIFRFbGVtZW50IHwgVFNvdXJjZT4+IHtcbiAgbGV0IC8qKiBAdHlwZSB7IU1hcDxUS2V5LCAoVFNvdXJjZXxURWxlbWVudCk+fSAqLyBtYXAgPSBuZXcgTWFwPFRLZXksIFRFbGVtZW50IHwgVFNvdXJjZT4oKTtcbiAgZm9yIGF3YWl0IChsZXQgLyoqIEB0eXBlIHtUU291cmNlfSAqLyBpdGVtIG9mIHNvdXJjZSkge1xuICAgIGxldCAvKiogQHR5cGUge1RFbGVtZW50fSAqLyB2YWx1ZSA9IGF3YWl0IGVsZW1lbnRTZWxlY3RvcihpdGVtKTtcbiAgICBsZXQgLyoqIEB0eXBlIHtUS2V5fSAqLyBrZXkgPSBhd2FpdCBrZXlTZWxlY3RvcihpdGVtKTtcbiAgICBtYXAuc2V0KGtleSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBtYXA7XG59XG4iXX0=