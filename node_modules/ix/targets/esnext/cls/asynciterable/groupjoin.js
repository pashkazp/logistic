goog.module('targets.esnext.cls.asynciterable.groupjoin'); exports = {}; var module = {id: 'targets/esnext/cls/asynciterable/groupjoin.js'};/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

var asynciterable_1 = goog.require('targets.esnext.cls.asynciterable');
const tsickle_forward_declare_1 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.asynciterable");
var _grouping_1 = goog.require('targets.esnext.cls.asynciterable._grouping');
const tsickle_forward_declare_2 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.asynciterable._grouping");
var empty_1 = goog.require('targets.esnext.cls.asynciterable.empty');
const tsickle_forward_declare_3 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.asynciterable.empty");
var from_1 = goog.require('targets.esnext.cls.asynciterable.from');
const tsickle_forward_declare_4 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.asynciterable.from");
var identity_1 = goog.require('targets.esnext.cls.internal.identity');
const tsickle_forward_declare_5 = goog.forwardDeclare("_Users.ptaylor.dev.ixjs.src.internal.identity");
/**
 * @template TOuter, TInner, TKey, TResult
 */
class GroupJoinAsyncIterable extends asynciterable_1.AsyncIterableX {
    /**
     * @param {!AsyncIterable<TOuter>} outer
     * @param {!AsyncIterable<TInner>} inner
     * @param {function(TOuter): (TKey|!Promise<TKey>)} outerSelector
     * @param {function(TInner): (TKey|!Promise<TKey>)} innerSelector
     * @param {function(TOuter, !AsyncIterable<TInner>): (TResult|!Promise<TResult>)} resultSelector
     */
    constructor(outer, inner, outerSelector, innerSelector, resultSelector) {
        super();
        this._outer = outer;
        this._inner = inner;
        this._outerSelector = outerSelector;
        this._innerSelector = innerSelector;
        this._resultSelector = resultSelector;
    }
    /**
     * @return {!AsyncIterableIterator<TResult>}
     */
    async *[Symbol.asyncIterator]() {
        const /** @type {!Map<TKey, !Array<?>>} */ map = await _grouping_1.createGrouping(this._inner, this._innerSelector, identity_1.identity);
        for await (let /** @type {TOuter} */ outerElement of this._outer) {
            const /** @type {TKey} */ outerKey = await this._outerSelector(outerElement);
            const /** @type {(!Iterable<TInner>|!tsickle_forward_declare_1.AsyncIterableX<TInner>)} */ innerElements = map.has(outerKey) ? (map.get(outerKey)) : empty_1.empty();
            yield await this._resultSelector(outerElement, from_1.from(innerElements));
        }
    }
}
function GroupJoinAsyncIterable_tsickle_Closure_declarations() {
    /** @type {!AsyncIterable<TOuter>} */
    GroupJoinAsyncIterable.prototype._outer;
    /** @type {!AsyncIterable<TInner>} */
    GroupJoinAsyncIterable.prototype._inner;
    /** @type {function(TOuter): (TKey|!Promise<TKey>)} */
    GroupJoinAsyncIterable.prototype._outerSelector;
    /** @type {function(TInner): (TKey|!Promise<TKey>)} */
    GroupJoinAsyncIterable.prototype._innerSelector;
    /** @type {function(TOuter, !AsyncIterable<TInner>): (TResult|!Promise<TResult>)} */
    GroupJoinAsyncIterable.prototype._resultSelector;
}
/**
 * @template TOuter, TInner, TKey, TResult
 * @param {!AsyncIterable<TOuter>} outer
 * @param {!AsyncIterable<TInner>} inner
 * @param {function(TOuter): (TKey|!Promise<TKey>)} outerSelector
 * @param {function(TInner): (TKey|!Promise<TKey>)} innerSelector
 * @param {function(TOuter, !AsyncIterable<TInner>): (TResult|!Promise<TResult>)} resultSelector
 * @return {!tsickle_forward_declare_1.AsyncIterableX<TResult>}
 */
function groupJoin(outer, inner, outerSelector, innerSelector, resultSelector) {
    return new GroupJoinAsyncIterable(outer, inner, outerSelector, innerSelector, resultSelector);
}
exports.groupJoin = groupJoin;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hc3luY2l0ZXJhYmxlL2dyb3Vwam9pbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7O0dBR0c7O0FBRUgsb0RBTHVCO0FBTXZCLE1BQU0seUJBQXlCLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQywyQ0FBMkMsQ0FBQyxDQU5oRDtBQU9sRCwyQ0FOdUI7QUFPdkIsTUFBTSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLHFEQUFxRCxDQUFDLENBUC9EO0FBUTdDLG1DQVBjO0FBUWQsTUFBTSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGlEQUFpRCxDQUFDLENBUnhFO0FBU2hDLGlDQVJhO0FBU2IsTUFBTSx5QkFBeUIsR0FBRyxJQUFJLENBQUMsY0FBYyxDQUFDLGdEQUFnRCxDQUFDLENBVHpFO0FBVTlCLG1EQVRpQjtBQVVqQixNQUFNLHlCQUF5QixHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsK0NBQStDLENBQUMsQ0FBQztBQUN2Rzs7R0FFRztBQVhILDRCQUEyRCxTQUFRLDhCQUF3QjtJQWtCM0Y7Ozs7OztPQU1HO0lBakJELFlBbUJJLEtBbEI0QixFQW1CNUIsS0FsQjRCLEVBbUI1QixhQWxCc0QsRUFtQnRELGFBbEJzRCxFQW1CdEQsY0FsQjJGO1FBbUI3RixLQWxCSyxFQUFFLENBQUM7UUFtQlIsSUFsQkksQ0FBQyxNQUFNLEdBQUUsS0FBTSxDQUFDO1FBbUJwQixJQWxCSSxDQUFDLE1BQU0sR0FBRSxLQUFNLENBQUM7UUFtQnBCLElBbEJJLENBQUMsY0FBYyxHQUFFLGFBQWMsQ0FBQztRQW1CcEMsSUFsQkksQ0FBQyxjQUFjLEdBQUUsYUFBYyxDQUFDO1FBbUJwQyxJQWxCSSxDQUFDLGVBQWUsR0FBRSxjQUFlLENBQUM7SUFtQnhDLENBQUM7SUFDSDs7T0FFRztJQW5CRCxLQUFLLEVBQUUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDO1FBcUIzQixNQUFNLG9DQXBCRCxDQUFBLEdBQUksR0FBRSxNQUFNLDBCQUFlLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBQyxJQUFLLENBQUMsY0FBYyxFQUFDLG1CQUFTLENBQUMsQ0FBQztRQXFCN0UsR0FwQkcsQ0FBQSxLQUFNLENBQU4sQ0FBUSxJQUFBLHFCQUFHLENBQUEsWUFBYSxJQUFHLElBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQSxDQUFFO1lBcUIzQyxNQUFNLG1CQXBCRCxDQUFBLFFBQVMsR0FBRSxNQUFNLElBQUssQ0FBQyxjQUFjLENBQUMsWUFBWSxDQUFDLENBQUM7WUFxQnpELE1BQU0sb0ZBcEJELENBQUEsYUFBYyxHQUFFLEdBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLEdBQUEsQ0FBcUIsR0FBRyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUEsQ0FBQyxHQUFFLGFBQU0sRUFBVSxDQUFDO1lBcUJoRyxNQXBCSyxNQUFNLElBQUssQ0FBQyxlQUFlLENBQUMsWUFBWSxFQUFDLFdBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQyxDQUFDO1FBcUJ0RSxDQXBCQztJQXFCSCxDQXBCQztDQUNIO0FBc0JBO0lBQ0EscUNBQXFDO0lBQ3JDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7SUFDeEMscUNBQXFDO0lBQ3JDLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUM7SUFDeEMsc0RBQXNEO0lBQ3RELHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUM7SUFDaEQsc0RBQXNEO0lBQ3RELHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUM7SUFDaEQsb0ZBQW9GO0lBQ3BGLHNCQUFzQixDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUM7QUFDakQsQ0FBQztBQUVEOzs7Ozs7OztHQVFHO0FBekNILG1CQTJDSSxLQTFDNEIsRUEyQzVCLEtBMUM0QixFQTJDNUIsYUExQ3NELEVBMkN0RCxhQTFDc0QsRUEyQ3RELGNBMUMyRjtJQTJDN0YsTUExQ00sQ0FBQSxJQUFJLHNCQUF1QixDQTJDL0IsS0ExQ0ssRUEyQ0wsS0ExQ0ssRUEyQ0wsYUExQ2EsRUEyQ2IsYUExQ2EsRUEyQ2IsY0ExQ2MsQ0FBQyxDQUFDO0FBMkNwQixDQTFDQztBQVpELDhCQVlDIiwiZmlsZSI6Imdyb3Vwam9pbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBmaWxlb3ZlcnZpZXcgYWRkZWQgYnkgdHNpY2tsZVxuICogQHN1cHByZXNzIHtjaGVja1R5cGVzfSBjaGVja2VkIGJ5IHRzY1xuICovXG5cbmltcG9ydCB7IEFzeW5jSXRlcmFibGVYIH0gZnJvbSAnLi4vYXN5bmNpdGVyYWJsZSc7XG5jb25zdCB0c2lja2xlX2ZvcndhcmRfZGVjbGFyZV8xID0gZ29vZy5mb3J3YXJkRGVjbGFyZShcIl9Vc2Vycy5wdGF5bG9yLmRldi5peGpzLnNyYy5hc3luY2l0ZXJhYmxlXCIpO1xuaW1wb3J0IHsgY3JlYXRlR3JvdXBpbmcgfSBmcm9tICcuL19ncm91cGluZyc7XG5jb25zdCB0c2lja2xlX2ZvcndhcmRfZGVjbGFyZV8yID0gZ29vZy5mb3J3YXJkRGVjbGFyZShcIl9Vc2Vycy5wdGF5bG9yLmRldi5peGpzLnNyYy5hc3luY2l0ZXJhYmxlLl9ncm91cGluZ1wiKTtcbmltcG9ydCB7IGVtcHR5IH0gZnJvbSAnLi9lbXB0eSc7XG5jb25zdCB0c2lja2xlX2ZvcndhcmRfZGVjbGFyZV8zID0gZ29vZy5mb3J3YXJkRGVjbGFyZShcIl9Vc2Vycy5wdGF5bG9yLmRldi5peGpzLnNyYy5hc3luY2l0ZXJhYmxlLmVtcHR5XCIpO1xuaW1wb3J0IHsgZnJvbSB9IGZyb20gJy4vZnJvbSc7XG5jb25zdCB0c2lja2xlX2ZvcndhcmRfZGVjbGFyZV80ID0gZ29vZy5mb3J3YXJkRGVjbGFyZShcIl9Vc2Vycy5wdGF5bG9yLmRldi5peGpzLnNyYy5hc3luY2l0ZXJhYmxlLmZyb21cIik7XG5pbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uL2ludGVybmFsL2lkZW50aXR5JztcbmNvbnN0IHRzaWNrbGVfZm9yd2FyZF9kZWNsYXJlXzUgPSBnb29nLmZvcndhcmREZWNsYXJlKFwiX1VzZXJzLnB0YXlsb3IuZGV2Lml4anMuc3JjLmludGVybmFsLmlkZW50aXR5XCIpO1xuLyoqXG4gKiBAdGVtcGxhdGUgVE91dGVyLCBUSW5uZXIsIFRLZXksIFRSZXN1bHRcbiAqL1xuY2xhc3MgR3JvdXBKb2luQXN5bmNJdGVyYWJsZTxUT3V0ZXIsIFRJbm5lciwgVEtleSwgVFJlc3VsdD4gZXh0ZW5kcyBBc3luY0l0ZXJhYmxlWDxUUmVzdWx0PiB7XG5wcml2YXRlIF9vdXRlcjogQXN5bmNJdGVyYWJsZTxUT3V0ZXI+O1xucHJpdmF0ZSBfaW5uZXI6IEFzeW5jSXRlcmFibGU8VElubmVyPjtcbnByaXZhdGUgX291dGVyU2VsZWN0b3I6ICh2YWx1ZTogVE91dGVyKSA9PiBUS2V5IHwgUHJvbWlzZTxUS2V5PjtcbnByaXZhdGUgX2lubmVyU2VsZWN0b3I6ICh2YWx1ZTogVElubmVyKSA9PiBUS2V5IHwgUHJvbWlzZTxUS2V5PjtcbnByaXZhdGUgX3Jlc3VsdFNlbGVjdG9yOiAob3V0ZXI6IFRPdXRlciwgaW5uZXI6IEFzeW5jSXRlcmFibGU8VElubmVyPikgPT4gVFJlc3VsdCB8IFByb21pc2U8VFJlc3VsdD47XG4vKipcbiAqIEBwYXJhbSB7IUFzeW5jSXRlcmFibGU8VE91dGVyPn0gb3V0ZXJcbiAqIEBwYXJhbSB7IUFzeW5jSXRlcmFibGU8VElubmVyPn0gaW5uZXJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVE91dGVyKTogKFRLZXl8IVByb21pc2U8VEtleT4pfSBvdXRlclNlbGVjdG9yXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFRJbm5lcik6IChUS2V5fCFQcm9taXNlPFRLZXk+KX0gaW5uZXJTZWxlY3RvclxuICogQHBhcmFtIHtmdW5jdGlvbihUT3V0ZXIsICFBc3luY0l0ZXJhYmxlPFRJbm5lcj4pOiAoVFJlc3VsdHwhUHJvbWlzZTxUUmVzdWx0Pil9IHJlc3VsdFNlbGVjdG9yXG4gKi9cbmNvbnN0cnVjdG9yKFxuICAgICAgb3V0ZXI6IEFzeW5jSXRlcmFibGU8VE91dGVyPixcbiAgICAgIGlubmVyOiBBc3luY0l0ZXJhYmxlPFRJbm5lcj4sXG4gICAgICBvdXRlclNlbGVjdG9yOiAodmFsdWU6IFRPdXRlcikgPT4gVEtleSB8IFByb21pc2U8VEtleT4sXG4gICAgICBpbm5lclNlbGVjdG9yOiAodmFsdWU6IFRJbm5lcikgPT4gVEtleSB8IFByb21pc2U8VEtleT4sXG4gICAgICByZXN1bHRTZWxlY3RvcjogKG91dGVyOiBUT3V0ZXIsIGlubmVyOiBBc3luY0l0ZXJhYmxlPFRJbm5lcj4pID0+IFRSZXN1bHQgfCBQcm9taXNlPFRSZXN1bHQ+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9vdXRlciA9IG91dGVyO1xuICAgIHRoaXMuX2lubmVyID0gaW5uZXI7XG4gICAgdGhpcy5fb3V0ZXJTZWxlY3RvciA9IG91dGVyU2VsZWN0b3I7XG4gICAgdGhpcy5faW5uZXJTZWxlY3RvciA9IGlubmVyU2VsZWN0b3I7XG4gICAgdGhpcy5fcmVzdWx0U2VsZWN0b3IgPSByZXN1bHRTZWxlY3RvcjtcbiAgfVxuLyoqXG4gKiBAcmV0dXJuIHshQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFRSZXN1bHQ+fVxuICovXG5hc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICBjb25zdCAvKiogQHR5cGUgeyFNYXA8VEtleSwgIUFycmF5PD8+Pn0gKi8gbWFwID0gYXdhaXQgY3JlYXRlR3JvdXBpbmcodGhpcy5faW5uZXIsIHRoaXMuX2lubmVyU2VsZWN0b3IsIGlkZW50aXR5KTtcbiAgICBmb3IgYXdhaXQgKGxldCAvKiogQHR5cGUge1RPdXRlcn0gKi8gb3V0ZXJFbGVtZW50IG9mIHRoaXMuX291dGVyKSB7XG4gICAgICBjb25zdCAvKiogQHR5cGUge1RLZXl9ICovIG91dGVyS2V5ID0gYXdhaXQgdGhpcy5fb3V0ZXJTZWxlY3RvcihvdXRlckVsZW1lbnQpO1xuICAgICAgY29uc3QgLyoqIEB0eXBlIHsoIUl0ZXJhYmxlPFRJbm5lcj58IXRzaWNrbGVfZm9yd2FyZF9kZWNsYXJlXzEuQXN5bmNJdGVyYWJsZVg8VElubmVyPil9ICovIGlubmVyRWxlbWVudHMgPSBtYXAuaGFzKG91dGVyS2V5KSA/IC8qKiBAdHlwZSB7IUl0ZXJhYmxlPFRJbm5lcj59ICovKCggPEl0ZXJhYmxlPFRJbm5lcj4+bWFwLmdldChvdXRlcktleSkpKSA6IGVtcHR5PFRJbm5lcj4oKTtcbiAgICAgIHlpZWxkIGF3YWl0IHRoaXMuX3Jlc3VsdFNlbGVjdG9yKG91dGVyRWxlbWVudCwgZnJvbShpbm5lckVsZW1lbnRzKSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIEdyb3VwSm9pbkFzeW5jSXRlcmFibGVfdHNpY2tsZV9DbG9zdXJlX2RlY2xhcmF0aW9ucygpIHtcbi8qKiBAdHlwZSB7IUFzeW5jSXRlcmFibGU8VE91dGVyPn0gKi9cbkdyb3VwSm9pbkFzeW5jSXRlcmFibGUucHJvdG90eXBlLl9vdXRlcjtcbi8qKiBAdHlwZSB7IUFzeW5jSXRlcmFibGU8VElubmVyPn0gKi9cbkdyb3VwSm9pbkFzeW5jSXRlcmFibGUucHJvdG90eXBlLl9pbm5lcjtcbi8qKiBAdHlwZSB7ZnVuY3Rpb24oVE91dGVyKTogKFRLZXl8IVByb21pc2U8VEtleT4pfSAqL1xuR3JvdXBKb2luQXN5bmNJdGVyYWJsZS5wcm90b3R5cGUuX291dGVyU2VsZWN0b3I7XG4vKiogQHR5cGUge2Z1bmN0aW9uKFRJbm5lcik6IChUS2V5fCFQcm9taXNlPFRLZXk+KX0gKi9cbkdyb3VwSm9pbkFzeW5jSXRlcmFibGUucHJvdG90eXBlLl9pbm5lclNlbGVjdG9yO1xuLyoqIEB0eXBlIHtmdW5jdGlvbihUT3V0ZXIsICFBc3luY0l0ZXJhYmxlPFRJbm5lcj4pOiAoVFJlc3VsdHwhUHJvbWlzZTxUUmVzdWx0Pil9ICovXG5Hcm91cEpvaW5Bc3luY0l0ZXJhYmxlLnByb3RvdHlwZS5fcmVzdWx0U2VsZWN0b3I7XG59XG5cbi8qKlxuICogQHRlbXBsYXRlIFRPdXRlciwgVElubmVyLCBUS2V5LCBUUmVzdWx0XG4gKiBAcGFyYW0geyFBc3luY0l0ZXJhYmxlPFRPdXRlcj59IG91dGVyXG4gKiBAcGFyYW0geyFBc3luY0l0ZXJhYmxlPFRJbm5lcj59IGlubmVyXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFRPdXRlcik6IChUS2V5fCFQcm9taXNlPFRLZXk+KX0gb3V0ZXJTZWxlY3RvclxuICogQHBhcmFtIHtmdW5jdGlvbihUSW5uZXIpOiAoVEtleXwhUHJvbWlzZTxUS2V5Pil9IGlubmVyU2VsZWN0b3JcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oVE91dGVyLCAhQXN5bmNJdGVyYWJsZTxUSW5uZXI+KTogKFRSZXN1bHR8IVByb21pc2U8VFJlc3VsdD4pfSByZXN1bHRTZWxlY3RvclxuICogQHJldHVybiB7IXRzaWNrbGVfZm9yd2FyZF9kZWNsYXJlXzEuQXN5bmNJdGVyYWJsZVg8VFJlc3VsdD59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncm91cEpvaW48VE91dGVyLCBUSW5uZXIsIFRLZXksIFRSZXN1bHQ+KFxuICAgIG91dGVyOiBBc3luY0l0ZXJhYmxlPFRPdXRlcj4sXG4gICAgaW5uZXI6IEFzeW5jSXRlcmFibGU8VElubmVyPixcbiAgICBvdXRlclNlbGVjdG9yOiAodmFsdWU6IFRPdXRlcikgPT4gVEtleSB8IFByb21pc2U8VEtleT4sXG4gICAgaW5uZXJTZWxlY3RvcjogKHZhbHVlOiBUSW5uZXIpID0+IFRLZXkgfCBQcm9taXNlPFRLZXk+LFxuICAgIHJlc3VsdFNlbGVjdG9yOiAob3V0ZXI6IFRPdXRlciwgaW5uZXI6IEFzeW5jSXRlcmFibGU8VElubmVyPikgPT4gVFJlc3VsdCB8IFByb21pc2U8VFJlc3VsdD4pOiBBc3luY0l0ZXJhYmxlWDxUUmVzdWx0PiB7XG4gIHJldHVybiBuZXcgR3JvdXBKb2luQXN5bmNJdGVyYWJsZTxUT3V0ZXIsIFRJbm5lciwgVEtleSwgVFJlc3VsdD4oXG4gICAgb3V0ZXIsXG4gICAgaW5uZXIsXG4gICAgb3V0ZXJTZWxlY3RvcixcbiAgICBpbm5lclNlbGVjdG9yLFxuICAgIHJlc3VsdFNlbGVjdG9yKTtcbn1cbiJdfQ==