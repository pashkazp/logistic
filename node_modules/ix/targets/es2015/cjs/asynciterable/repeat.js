Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const of_1 = require("./of");
const asynciterable_1 = require("../asynciterable");
class RepeatAsyncIterable extends asynciterable_1.AsyncIterableX {
    constructor(source, count) {
        super();
        this._source = source;
        this._count = count;
    }
    [Symbol.asyncIterator]() {
        return tslib_1.__asyncGenerator(this, arguments, function* _a() {
            if (this._count === -1) {
                while (1) {
                    try {
                        for (var _a = tslib_1.__asyncValues(this._source), _b; _b = yield tslib_1.__await(_a.next()), !_b.done;) {
                            let item = yield tslib_1.__await(_b.value);
                            yield item;
                        }
                    }
                    catch (e_1_1) { e_1 = { error: e_1_1 }; }
                    finally {
                        try {
                            if (_b && !_b.done && (_c = _a.return)) yield tslib_1.__await(_c.call(_a));
                        }
                        finally { if (e_1) throw e_1.error; }
                    }
                }
            }
            else {
                for (let i = 0; i < this._count; i++) {
                    try {
                        for (var _d = tslib_1.__asyncValues(this._source), _e; _e = yield tslib_1.__await(_d.next()), !_e.done;) {
                            let item = yield tslib_1.__await(_e.value);
                            yield item;
                        }
                    }
                    catch (e_2_1) { e_2 = { error: e_2_1 }; }
                    finally {
                        try {
                            if (_e && !_e.done && (_f = _d.return)) yield tslib_1.__await(_f.call(_d));
                        }
                        finally { if (e_2) throw e_2.error; }
                    }
                }
            }
            var e_1, _c, e_2, _f;
        });
    }
}
function repeat(source, count = -1) {
    return new RepeatAsyncIterable(source, count);
}
exports.repeat = repeat;
function repeatStatic(value, count = -1) {
    return new RepeatAsyncIterable(of_1.of(value), count);
}
exports.repeatStatic = repeatStatic;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvcmVwZWF0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTBCO0FBQzFCLG9EQUFrRDtBQUVsRCx5QkFBbUMsU0FBUSw4QkFBdUI7SUFJaEUsWUFBWSxNQUE4QixFQUFFLEtBQWE7UUFDdkQsS0FBSyxFQUFFLENBQUM7UUFDUixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUN0QixJQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztJQUN0QixDQUFDO0lBRU0sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDOztZQUMzQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDdkIsT0FBTyxDQUFDLEVBQUUsQ0FBQzs7d0JBQ1QsR0FBRyxDQUFDLENBQW1CLElBQUEsS0FBQSxzQkFBQSxJQUFJLENBQUMsT0FBTyxDQUFBLElBQUE7NEJBQXhCLElBQUksSUFBSSxrQ0FBQSxDQUFBOzRCQUFvQixNQUFNLElBQUksQ0FBQzt5QkFBRTs7Ozs7Ozs7O2dCQUN0RCxDQUFDO1lBQ0gsQ0FBQztZQUFDLElBQUksQ0FBQyxDQUFDO2dCQUNOLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDOzt3QkFDckMsR0FBRyxDQUFDLENBQW1CLElBQUEsS0FBQSxzQkFBQSxJQUFJLENBQUMsT0FBTyxDQUFBLElBQUE7NEJBQXhCLElBQUksSUFBSSxrQ0FBQSxDQUFBOzRCQUFvQixNQUFNLElBQUksQ0FBQzt5QkFBRTs7Ozs7Ozs7O2dCQUN0RCxDQUFDO1lBQ0gsQ0FBQzs7UUFDSCxDQUFDO0tBQUE7Q0FDRjtBQUVELGdCQUFnQyxNQUE4QixFQUFFLFFBQWdCLENBQUMsQ0FBQztJQUNoRixNQUFNLENBQUMsSUFBSSxtQkFBbUIsQ0FBVSxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekQsQ0FBQztBQUZELHdCQUVDO0FBRUQsc0JBQXNDLEtBQWMsRUFBRSxRQUFnQixDQUFDLENBQUM7SUFDdEUsTUFBTSxDQUFDLElBQUksbUJBQW1CLENBQVUsT0FBRSxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO0FBQzVELENBQUM7QUFGRCxvQ0FFQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL3JlcGVhdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9mIH0gZnJvbSAnLi9vZic7XG5pbXBvcnQgeyBBc3luY0l0ZXJhYmxlWCB9IGZyb20gJy4uL2FzeW5jaXRlcmFibGUnO1xuXG5jbGFzcyBSZXBlYXRBc3luY0l0ZXJhYmxlPFRTb3VyY2U+IGV4dGVuZHMgQXN5bmNJdGVyYWJsZVg8VFNvdXJjZT4ge1xuICBwcml2YXRlIF9zb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT47XG4gIHByaXZhdGUgX2NvdW50OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+LCBjb3VudDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fY291bnQgPSBjb3VudDtcbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGlmICh0aGlzLl9jb3VudCA9PT0gLTEpIHtcbiAgICAgIHdoaWxlICgxKSB7XG4gICAgICAgIGZvciBhd2FpdCAobGV0IGl0ZW0gb2YgdGhpcy5fc291cmNlKSB7IHlpZWxkIGl0ZW07IH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLl9jb3VudDsgaSsrKSB7XG4gICAgICAgIGZvciBhd2FpdCAobGV0IGl0ZW0gb2YgdGhpcy5fc291cmNlKSB7IHlpZWxkIGl0ZW07IH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlcGVhdDxUU291cmNlPihzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sIGNvdW50OiBudW1iZXIgPSAtMSk6IEFzeW5jSXRlcmFibGVYPFRTb3VyY2U+IHtcbiAgcmV0dXJuIG5ldyBSZXBlYXRBc3luY0l0ZXJhYmxlPFRTb3VyY2U+KHNvdXJjZSwgY291bnQpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwZWF0U3RhdGljPFRTb3VyY2U+KHZhbHVlOiBUU291cmNlLCBjb3VudDogbnVtYmVyID0gLTEpOiBBc3luY0l0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHJldHVybiBuZXcgUmVwZWF0QXN5bmNJdGVyYWJsZTxUU291cmNlPihvZih2YWx1ZSksIGNvdW50KTtcbn1cbiJdfQ==
