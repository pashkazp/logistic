Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const toarray_1 = require("./toarray");
function reduceRight(source, accumulator, ...args) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        let [seed] = args;
        const hasSeed = args.length === 1;
        let hasValue = false;
        const array = yield toarray_1.toArray(source);
        for (let offset = array.length - 1; offset >= 0; offset--) {
            const item = array[offset];
            if (hasValue || (hasValue = hasSeed)) {
                seed = yield accumulator(seed, item, offset);
            }
            else {
                seed = item;
                hasValue = true;
            }
        }
        if (hasSeed && !hasValue) {
            return seed;
        }
        if (!hasValue) {
            throw new Error('Sequence contains no elements');
        }
        return seed;
    });
}
exports.reduceRight = reduceRight;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvcmVkdWNlcmlnaHQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBb0M7QUFTcEMscUJBQ0ksTUFBd0IsRUFDeEIsV0FBb0UsRUFDcEUsR0FBRyxJQUFlOztRQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1FBQ2xDLElBQUksUUFBUSxHQUFHLEtBQUssQ0FBQztRQUNyQixNQUFNLEtBQUssR0FBRyxNQUFNLGlCQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEMsR0FBRyxDQUFDLENBQUMsSUFBSSxNQUFNLEdBQUcsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsTUFBTSxJQUFJLENBQUMsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDO1lBQzFELE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUMzQixFQUFFLENBQUMsQ0FBQyxRQUFRLElBQUksQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUNyQyxJQUFJLEdBQUcsTUFBTSxXQUFXLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztZQUMvQyxDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sSUFBSSxHQUFHLElBQUksQ0FBQztnQkFDWixRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ2xCLENBQUM7UUFDSCxDQUFDO1FBRUQsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsSUFBSyxDQUFDO1FBQ2YsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztRQUNuRCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUssQ0FBQztJQUNmLENBQUM7Q0FBQTtBQTNCRCxrQ0EyQkMiLCJmaWxlIjoiYXN5bmNpdGVyYWJsZS9yZWR1Y2VyaWdodC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRvQXJyYXkgfSBmcm9tICcuL3RvYXJyYXknO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVkdWNlUmlnaHQ8VD4oXG4gIHNvdXJjZTogQXN5bmNJdGVyYWJsZTxUPixcbiAgYWNjdW11bGF0b3I6IChhY2M6IFQsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiBUIHwgUHJvbWlzZTxUPik6IFByb21pc2U8VD47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVkdWNlUmlnaHQ8VCwgUiA9IFQ+KFxuICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VD4sXG4gIGFjY3VtdWxhdG9yOiAoYWNjOiBSLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gUiB8IFByb21pc2U8Uj4sXG4gIHNlZWQ6IFIpOiBQcm9taXNlPFI+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZHVjZVJpZ2h0PFQsIFIgPSBUPihcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VD4sXG4gICAgYWNjdW11bGF0b3I6IChhY2M6IFQgfCBSLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gUiB8IFByb21pc2U8Uj4sXG4gICAgLi4uYXJnczogKFQgfCBSKVtdKTogUHJvbWlzZTxUIHwgUj4ge1xuICBsZXQgW3NlZWRdID0gYXJncztcbiAgY29uc3QgaGFzU2VlZCA9IGFyZ3MubGVuZ3RoID09PSAxO1xuICBsZXQgaGFzVmFsdWUgPSBmYWxzZTtcbiAgY29uc3QgYXJyYXkgPSBhd2FpdCB0b0FycmF5KHNvdXJjZSk7XG4gIGZvciAobGV0IG9mZnNldCA9IGFycmF5Lmxlbmd0aCAtIDE7IG9mZnNldCA+PSAwOyBvZmZzZXQtLSkge1xuICAgIGNvbnN0IGl0ZW0gPSBhcnJheVtvZmZzZXRdO1xuICAgIGlmIChoYXNWYWx1ZSB8fCAoaGFzVmFsdWUgPSBoYXNTZWVkKSkge1xuICAgICAgc2VlZCA9IGF3YWl0IGFjY3VtdWxhdG9yKHNlZWQsIGl0ZW0sIG9mZnNldCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZWQgPSBpdGVtO1xuICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIGlmIChoYXNTZWVkICYmICFoYXNWYWx1ZSkge1xuICAgIHJldHVybiBzZWVkITtcbiAgfVxuXG4gIGlmICghaGFzVmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG5vIGVsZW1lbnRzJyk7XG4gIH1cblxuICByZXR1cm4gc2VlZCE7XG59XG4iXX0=
