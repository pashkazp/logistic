Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
function reduce(source, accumulator, ...args) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        let [seed] = args;
        const hasSeed = args.length === 1;
        let i = 0, hasValue = false;
        try {
            for (var source_1 = tslib_1.__asyncValues(source), source_1_1; source_1_1 = yield source_1.next(), !source_1_1.done;) {
                let item = yield source_1_1.value;
                if (hasValue || (hasValue = hasSeed)) {
                    seed = yield accumulator(seed, item, i++);
                }
                else {
                    seed = item;
                    hasValue = true;
                    i++;
                }
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (source_1_1 && !source_1_1.done && (_a = source_1.return)) yield _a.call(source_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        if (hasSeed && !hasValue) {
            return seed;
        }
        if (!hasValue) {
            throw new Error('Sequence contains no elements');
        }
        return seed;
        var e_1, _a;
    });
}
exports.reduce = reduce;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvcmVkdWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBT0EsZ0JBQ0ksTUFBd0IsRUFDeEIsV0FBb0UsRUFDcEUsR0FBRyxJQUFlOztRQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO1FBQ2xCLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxRQUFRLEdBQUcsS0FBSyxDQUFDOztZQUM1QixHQUFHLENBQUMsQ0FBbUIsSUFBQSxXQUFBLHNCQUFBLE1BQU0sQ0FBQSxZQUFBO2dCQUFsQixJQUFJLElBQUkseUJBQUEsQ0FBQTtnQkFDakIsRUFBRSxDQUFDLENBQUMsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDckMsSUFBSSxHQUFHLE1BQU0sV0FBVyxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDNUMsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztvQkFDTixJQUFJLEdBQUcsSUFBSSxDQUFDO29CQUNaLFFBQVEsR0FBRyxJQUFJLENBQUM7b0JBQ2hCLENBQUMsRUFBRSxDQUFDO2dCQUNOLENBQUM7YUFDRjs7Ozs7Ozs7O1FBRUQsRUFBRSxDQUFDLENBQUMsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUN6QixNQUFNLENBQUMsSUFBSyxDQUFDO1FBQ2YsQ0FBQztRQUVELEVBQUUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNkLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztRQUNuRCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUssQ0FBQzs7SUFDZixDQUFDO0NBQUE7QUExQkQsd0JBMEJDIiwiZmlsZSI6ImFzeW5jaXRlcmFibGUvcmVkdWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZHVjZTxUPihcbiAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFQ+LFxuICBhY2N1bXVsYXRvcjogKGFjYzogVCwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IFQgfCBQcm9taXNlPFQ+KTogUHJvbWlzZTxUPjtcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZWR1Y2U8VCwgUiA9IFQ+KFxuICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VD4sXG4gIGFjY3VtdWxhdG9yOiAoYWNjOiBSLCB2YWx1ZTogVCwgaW5kZXg6IG51bWJlcikgPT4gUiB8IFByb21pc2U8Uj4sXG4gIHNlZWQ6IFIpOiBQcm9taXNlPFI+O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZHVjZTxULCBSID0gVD4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFQ+LFxuICAgIGFjY3VtdWxhdG9yOiAoYWNjOiBUIHwgUiwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IFIgfCBQcm9taXNlPFI+LFxuICAgIC4uLmFyZ3M6IChUIHwgUilbXSk6IFByb21pc2U8VCB8IFI+IHtcbiAgbGV0IFtzZWVkXSA9IGFyZ3M7XG4gIGNvbnN0IGhhc1NlZWQgPSBhcmdzLmxlbmd0aCA9PT0gMTtcbiAgbGV0IGkgPSAwLCBoYXNWYWx1ZSA9IGZhbHNlO1xuICBmb3IgYXdhaXQgKGxldCBpdGVtIG9mIHNvdXJjZSkge1xuICAgIGlmIChoYXNWYWx1ZSB8fCAoaGFzVmFsdWUgPSBoYXNTZWVkKSkge1xuICAgICAgc2VlZCA9IGF3YWl0IGFjY3VtdWxhdG9yKHNlZWQsIGl0ZW0sIGkrKyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZWQgPSBpdGVtO1xuICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgaSsrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChoYXNTZWVkICYmICFoYXNWYWx1ZSkge1xuICAgIHJldHVybiBzZWVkITtcbiAgfVxuXG4gIGlmICghaGFzVmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlcXVlbmNlIGNvbnRhaW5zIG5vIGVsZW1lbnRzJyk7XG4gIH1cblxuICByZXR1cm4gc2VlZCE7XG59XG4iXX0=
