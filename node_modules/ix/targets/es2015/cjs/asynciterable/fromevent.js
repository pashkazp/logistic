Object.defineProperty(exports, "__esModule", { value: true });
const fromeventpattern_1 = require("./fromeventpattern");
function isNodeEventEmitter(obj) {
    return !!obj && typeof obj.addListener === 'function' && typeof obj.removeListener === 'function';
}
function isEventTarget(obj) {
    return !!obj && typeof obj.addEventListener === 'function' && typeof obj.removeEventListener === 'function';
}
function fromEvent(obj, type, options) {
    if (isEventTarget(obj)) {
        const target = (obj);
        return fromeventpattern_1.fromEventPattern(h => target.addEventListener(type, (h), options), h => target.removeEventListener(type, (h), options));
    }
    else if (isNodeEventEmitter(obj)) {
        const target = (obj);
        return fromeventpattern_1.fromEventPattern(h => target.addListener(type, h), h => target.removeListener(type, h));
    }
    else {
        throw new TypeError('Unsupported event target');
    }
}
exports.fromEvent = fromEvent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvZnJvbWV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSx5REFBc0Q7QUFldEQsNEJBQTRCLEdBQVE7SUFDbEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksT0FBTyxHQUFHLENBQUMsV0FBVyxLQUFLLFVBQVUsSUFBSSxPQUFPLEdBQUcsQ0FBQyxjQUFjLEtBQUssVUFBVSxDQUFDO0FBQ3BHLENBQUM7QUFFRCx1QkFBdUIsR0FBUTtJQUM3QixNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxPQUFPLEdBQUcsQ0FBQyxnQkFBZ0IsS0FBSyxVQUFVLElBQUksT0FBTyxHQUFHLENBQUMsbUJBQW1CLEtBQUssVUFBVSxDQUFDO0FBQzlHLENBQUM7QUFFRCxtQkFDSSxHQUFrQixFQUNsQixJQUFZLEVBQ1osT0FBOEI7SUFDaEMsRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixNQUFNLE1BQU0sR0FBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxNQUFNLENBQUMsbUNBQWdCLENBQ3JCLENBQUMsSUFBSSxNQUFNLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUMvRCxDQUFDLElBQUksTUFBTSxDQUFDLG1CQUFtQixDQUFDLElBQUksRUFBaUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FDbkUsQ0FBQztJQUNKLENBQUM7SUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ25DLE1BQU0sTUFBTSxHQUFxQixDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZDLE1BQU0sQ0FBQyxtQ0FBZ0IsQ0FDckIsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUNoQyxDQUFDLElBQUksTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQ3BDLENBQUM7SUFDSixDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDTixNQUFNLElBQUksU0FBUyxDQUFDLDBCQUEwQixDQUFDLENBQUM7SUFDbEQsQ0FBQztBQUNILENBQUM7QUFuQkQsOEJBbUJDIiwiZmlsZSI6ImFzeW5jaXRlcmFibGUvZnJvbWV2ZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZnJvbUV2ZW50UGF0dGVybiB9IGZyb20gJy4vZnJvbWV2ZW50cGF0dGVybic7XG5cbmV4cG9ydCB0eXBlIE5vZGVFdmVudEVtaXR0ZXIgID0ge1xuICBhZGRMaXN0ZW5lcjogKGV2ZW50TmFtZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgcmVtb3ZlTGlzdGVuZXI6IChldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pID0+IHZvaWQ7XG59O1xuXG5leHBvcnQgdHlwZSBFdmVudExpc3RlbmVyT3B0aW9ucyA9IHtcbiAgY2FwdHVyZT86IGJvb2xlYW47XG4gIHBhc3NpdmU/OiBib29sZWFuO1xuICBvbmNlPzogYm9vbGVhbjtcbn0gfCBib29sZWFuO1xuXG5leHBvcnQgdHlwZSBFdmVudGVkVGFyZ2V0ID0gRXZlbnRUYXJnZXQgfCBOb2RlRXZlbnRFbWl0dGVyO1xuXG5mdW5jdGlvbiBpc05vZGVFdmVudEVtaXR0ZXIob2JqOiBhbnkpOiBvYmogaXMgTm9kZUV2ZW50RW1pdHRlciB7XG4gIHJldHVybiAhIW9iaiAmJiB0eXBlb2Ygb2JqLmFkZExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmoucmVtb3ZlTGlzdGVuZXIgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzRXZlbnRUYXJnZXQob2JqOiBhbnkpOiBvYmogaXMgRXZlbnRUYXJnZXQge1xuICByZXR1cm4gISFvYmogJiYgdHlwZW9mIG9iai5hZGRFdmVudExpc3RlbmVyID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZyb21FdmVudDxUU291cmNlPihcbiAgICBvYmo6IEV2ZW50ZWRUYXJnZXQsXG4gICAgdHlwZTogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBFdmVudExpc3RlbmVyT3B0aW9ucykge1xuICBpZiAoaXNFdmVudFRhcmdldChvYmopKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gPEV2ZW50VGFyZ2V0PihvYmopO1xuICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuPFRTb3VyY2U+KFxuICAgICAgaCA9PiB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCA8RXZlbnRMaXN0ZW5lcj4oaCksIG9wdGlvbnMpLFxuICAgICAgaCA9PiB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCA8RXZlbnRMaXN0ZW5lcj4oaCksIG9wdGlvbnMpXG4gICAgKTtcbiAgfSBlbHNlIGlmIChpc05vZGVFdmVudEVtaXR0ZXIob2JqKSkge1xuICAgIGNvbnN0IHRhcmdldCA9IDxOb2RlRXZlbnRFbWl0dGVyPihvYmopO1xuICAgIHJldHVybiBmcm9tRXZlbnRQYXR0ZXJuPFRTb3VyY2U+KFxuICAgICAgaCA9PiB0YXJnZXQuYWRkTGlzdGVuZXIodHlwZSwgaCksXG4gICAgICBoID0+IHRhcmdldC5yZW1vdmVMaXN0ZW5lcih0eXBlLCBoKVxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5zdXBwb3J0ZWQgZXZlbnQgdGFyZ2V0Jyk7XG4gIH1cbn1cbiJdfQ==
