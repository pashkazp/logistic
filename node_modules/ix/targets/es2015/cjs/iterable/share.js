Object.defineProperty(exports, "__esModule", { value: true });
const iterable_1 = require("../iterable");
const create_1 = require("./create");
class SharedIterable extends iterable_1.IterableX {
    constructor(it) {
        super();
        this._it = it;
    }
    [Symbol.iterator]() {
        return this._it;
    }
}
function share(source, fn) {
    return fn ?
        create_1.create(() => fn(new SharedIterable(source[Symbol.iterator]()))[Symbol.iterator]()) :
        new SharedIterable(source[Symbol.iterator]());
}
exports.share = share;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL3NoYXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSwwQ0FBd0M7QUFDeEMscUNBQWtDO0FBRWxDLG9CQUF3QixTQUFRLG9CQUFZO0lBRzFDLFlBQVksRUFBZTtRQUN6QixLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDO0lBQ2hCLENBQUM7SUFFRCxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDZixNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0NBQ0Y7QUFNRCxlQUNJLE1BQXlCLEVBQ3pCLEVBQW9EO0lBQ3RELE1BQU0sQ0FBQyxFQUFFO1FBQ1AsZUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7UUFDbEYsSUFBSSxjQUFjLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDLENBQUM7QUFDbEQsQ0FBQztBQU5ELHNCQU1DIiwiZmlsZSI6Iml0ZXJhYmxlL3NoYXJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSXRlcmFibGVYIH0gZnJvbSAnLi4vaXRlcmFibGUnO1xuaW1wb3J0IHsgY3JlYXRlIH0gZnJvbSAnLi9jcmVhdGUnO1xuXG5jbGFzcyBTaGFyZWRJdGVyYWJsZTxUPiBleHRlbmRzIEl0ZXJhYmxlWDxUPiB7XG4gIHByaXZhdGUgX2l0OiBJdGVyYXRvcjxUPjtcblxuICBjb25zdHJ1Y3RvcihpdDogSXRlcmF0b3I8VD4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2l0ID0gaXQ7XG4gIH1cblxuICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXQ7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNoYXJlPFRTb3VyY2U+KHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4pOiBJdGVyYWJsZVg8VFNvdXJjZT47XG5leHBvcnQgZnVuY3Rpb24gc2hhcmU8VFNvdXJjZSwgVFJlc3VsdD4oXG4gICAgc291cmNlOiBJdGVyYWJsZTxUU291cmNlPixcbiAgICBmbj86ICh2YWx1ZTogSXRlcmFibGU8VFNvdXJjZT4pID0+IEl0ZXJhYmxlPFRSZXN1bHQ+KTogSXRlcmFibGVYPFRSZXN1bHQ+O1xuZXhwb3J0IGZ1bmN0aW9uIHNoYXJlPFRTb3VyY2UsIFRSZXN1bHQ+KFxuICAgIHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sXG4gICAgZm4/OiAodmFsdWU6IEl0ZXJhYmxlPFRTb3VyY2U+KSA9PiBJdGVyYWJsZTxUUmVzdWx0Pik6IEl0ZXJhYmxlWDxUU291cmNlIHwgVFJlc3VsdD4ge1xuICByZXR1cm4gZm4gP1xuICAgIGNyZWF0ZSgoKSA9PiBmbihuZXcgU2hhcmVkSXRlcmFibGUoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0oKSkpW1N5bWJvbC5pdGVyYXRvcl0oKSkgOlxuICAgIG5ldyBTaGFyZWRJdGVyYWJsZShzb3VyY2VbU3ltYm9sLml0ZXJhdG9yXSgpKTtcbn1cbiJdfQ==
