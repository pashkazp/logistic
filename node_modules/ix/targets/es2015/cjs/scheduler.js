Object.defineProperty(exports, "__esModule", { value: true });
class ActionSubscription {
    constructor(action) {
        this.isUnsubscribed = false;
        this._action = action;
    }
    unsubscribe() {
        if (!this.isUnsubscribed) {
            this.isUnsubscribed = true;
            this._action();
        }
    }
}
class DefaultScheduler {
    get now() {
        return Date.now();
    }
    delay(dueTime) {
        return new Promise(res => setTimeout(res, dueTime));
    }
    schedule(action, dueTime) {
        const id = setTimeout(() => action(), dueTime);
        return new ActionSubscription(() => clearTimeout(id));
    }
}
exports.DefaultScheduler = DefaultScheduler;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBVUE7SUFJRSxZQUFZLE1BQWtCO1FBSHZCLG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBSTVCLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0lBQ3hCLENBQUM7SUFFRCxXQUFXO1FBQ1QsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakIsQ0FBQztJQUNILENBQUM7Q0FDRjtBQUVEO0lBQ0UsSUFBSSxHQUFHO1FBQ0wsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztJQUNwQixDQUFDO0lBRUQsS0FBSyxDQUFDLE9BQWU7UUFDbkIsTUFBTSxDQUFDLElBQUksT0FBTyxDQUFPLEdBQUcsSUFBSSxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVELFFBQVEsQ0FBQyxNQUFrQixFQUFFLE9BQWU7UUFDMUMsTUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLE1BQU0sTUFBTSxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLElBQUksa0JBQWtCLENBQUMsTUFBTSxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN4RCxDQUFDO0NBQ0Y7QUFiRCw0Q0FhQyIsImZpbGUiOiJzY2hlZHVsZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICcuL3N1YnNjcmlwdGlvbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2NoZWR1bGVyIHtcbiAgcmVhZG9ubHkgbm93OiBudW1iZXI7XG4gIGRlbGF5KHRpbWU6IG51bWJlcik6IFByb21pc2U8dm9pZD47XG4gIHNjaGVkdWxlKFxuICAgIGFjdGlvbjogKCkgPT4gdm9pZCxcbiAgICBkdWVUaW1lOiBudW1iZXIpOiBTdWJzY3JpcHRpb247XG59XG5cbmNsYXNzIEFjdGlvblN1YnNjcmlwdGlvbiBpbXBsZW1lbnRzIFN1YnNjcmlwdGlvbiB7XG4gIHB1YmxpYyBpc1Vuc3Vic2NyaWJlZCA9IGZhbHNlO1xuICBwcml2YXRlIF9hY3Rpb246ICgpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoYWN0aW9uOiAoKSA9PiB2b2lkKSB7XG4gICAgdGhpcy5fYWN0aW9uID0gYWN0aW9uO1xuICB9XG5cbiAgdW5zdWJzY3JpYmUoKSB7XG4gICAgaWYgKCF0aGlzLmlzVW5zdWJzY3JpYmVkKSB7XG4gICAgICB0aGlzLmlzVW5zdWJzY3JpYmVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2FjdGlvbigpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRGVmYXVsdFNjaGVkdWxlciBpbXBsZW1lbnRzIFNjaGVkdWxlciB7XG4gIGdldCBub3coKSB7XG4gICAgcmV0dXJuIERhdGUubm93KCk7XG4gIH1cblxuICBkZWxheShkdWVUaW1lOiBudW1iZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4ocmVzID0+IHNldFRpbWVvdXQocmVzLCBkdWVUaW1lKSk7XG4gIH1cblxuICBzY2hlZHVsZShhY3Rpb246ICgpID0+IHZvaWQsIGR1ZVRpbWU6IG51bWJlcik6IFN1YnNjcmlwdGlvbiB7XG4gICAgY29uc3QgaWQgPSBzZXRUaW1lb3V0KCgpID0+IGFjdGlvbigpLCBkdWVUaW1lKTtcbiAgICByZXR1cm4gbmV3IEFjdGlvblN1YnNjcmlwdGlvbigoKSA9PiBjbGVhclRpbWVvdXQoaWQpKTtcbiAgfVxufSJdfQ==
