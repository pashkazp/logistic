import * as tslib_1 from "tslib";
import { identityAsync } from '../internal/identity';
export function toMap(source, keySelector, elementSelector = identityAsync) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        let map = new Map();
        try {
            for (var source_1 = tslib_1.__asyncValues(source), source_1_1; source_1_1 = yield source_1.next(), !source_1_1.done;) {
                let item = yield source_1_1.value;
                let value = yield elementSelector(item);
                let key = yield keySelector(item);
                map.set(key, value);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (source_1_1 && !source_1_1.done && (_a = source_1.return)) yield _a.call(source_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return map;
        var e_1, _a;
    });
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvdG9tYXAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQVNyRCxNQUFNLGdCQUNGLE1BQThCLEVBQzlCLFdBQW9ELEVBQ3BELGtCQUFtRSxhQUFhOztRQUVsRixJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsRUFBNEIsQ0FBQzs7WUFDOUMsR0FBRyxDQUFDLENBQW1CLElBQUEsV0FBQSxzQkFBQSxNQUFNLENBQUEsWUFBQTtnQkFBbEIsSUFBSSxJQUFJLHlCQUFBLENBQUE7Z0JBQ2pCLElBQUksS0FBSyxHQUFHLE1BQU0sZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUN4QyxJQUFJLEdBQUcsR0FBRyxNQUFNLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztnQkFDbEMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDckI7Ozs7Ozs7OztRQUNELE1BQU0sQ0FBQyxHQUFHLENBQUM7O0lBQ2IsQ0FBQztDQUFBIiwiZmlsZSI6ImFzeW5jaXRlcmFibGUvdG9tYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpZGVudGl0eUFzeW5jIH0gZnJvbSAnLi4vaW50ZXJuYWwvaWRlbnRpdHknO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9NYXA8VFNvdXJjZSwgVEtleT4oXG4gICAgc291cmNlOiBBc3luY0l0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSB8IFByb21pc2U8VEtleT4pOiBQcm9taXNlPE1hcDxUS2V5LCBUU291cmNlPj47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9NYXA8VFNvdXJjZSwgVEtleSwgVEVsZW1lbnQgPSBUU291cmNlPihcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sXG4gICAga2V5U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBUS2V5IHwgUHJvbWlzZTxUS2V5PixcbiAgICBlbGVtZW50U2VsZWN0b3I/OiAoaXRlbTogVFNvdXJjZSkgPT4gVEVsZW1lbnQgfCBQcm9taXNlPFRFbGVtZW50Pik6IFByb21pc2U8TWFwPFRLZXksIFRFbGVtZW50Pj47XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9NYXA8VFNvdXJjZSwgVEtleSwgVEVsZW1lbnQgPSBUU291cmNlPihcbiAgICBzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4sXG4gICAga2V5U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBUS2V5IHwgUHJvbWlzZTxUS2V5PixcbiAgICBlbGVtZW50U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBURWxlbWVudCB8IFByb21pc2U8VEVsZW1lbnQ+ID0gaWRlbnRpdHlBc3luYyk6XG4gICAgUHJvbWlzZTxNYXA8VEtleSwgVEVsZW1lbnQgfCBUU291cmNlPj4ge1xuICBsZXQgbWFwID0gbmV3IE1hcDxUS2V5LCBURWxlbWVudCB8IFRTb3VyY2U+KCk7XG4gIGZvciBhd2FpdCAobGV0IGl0ZW0gb2Ygc291cmNlKSB7XG4gICAgbGV0IHZhbHVlID0gYXdhaXQgZWxlbWVudFNlbGVjdG9yKGl0ZW0pO1xuICAgIGxldCBrZXkgPSBhd2FpdCBrZXlTZWxlY3RvcihpdGVtKTtcbiAgICBtYXAuc2V0KGtleSwgdmFsdWUpO1xuICB9XG4gIHJldHVybiBtYXA7XG59XG4iXX0=
