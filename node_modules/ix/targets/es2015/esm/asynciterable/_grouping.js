import * as tslib_1 from "tslib";
/**
 * @ignore
 */
export function createGrouping(source, keySelector, elementSelector) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        let map = new Map();
        try {
            for (var source_1 = tslib_1.__asyncValues(source), source_1_1; source_1_1 = yield source_1.next(), !source_1_1.done;) {
                let item = yield source_1_1.value;
                let key = yield keySelector(item);
                let grouping = map.get(key);
                if (!map.has(key)) {
                    grouping = [];
                    map.set(key, grouping);
                }
                let element = yield elementSelector(item);
                grouping.push(element);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (source_1_1 && !source_1_1.done && (_a = source_1.return)) yield _a.call(source_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        return map;
        var e_1, _a;
    });
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvX2dyb3VwaW5nLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7R0FFRztBQUNILE1BQU0seUJBQ0YsTUFBOEIsRUFDOUIsV0FBcUQsRUFDckQsZUFBNkQ7O1FBQy9ELElBQUksR0FBRyxHQUFHLElBQUksR0FBRyxFQUFrQixDQUFDOztZQUNwQyxHQUFHLENBQUMsQ0FBbUIsSUFBQSxXQUFBLHNCQUFBLE1BQU0sQ0FBQSxZQUFBO2dCQUFsQixJQUFJLElBQUkseUJBQUEsQ0FBQTtnQkFDakIsSUFBSSxHQUFHLEdBQUcsTUFBTSxXQUFXLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2xDLElBQUksUUFBUSxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzVCLEVBQUUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ2xCLFFBQVEsR0FBRyxFQUFFLENBQUM7b0JBQ2QsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsUUFBUSxDQUFDLENBQUM7Z0JBQ3pCLENBQUM7Z0JBQ0QsSUFBSSxPQUFPLEdBQUcsTUFBTSxlQUFlLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQzFDLFFBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7YUFDekI7Ozs7Ozs7OztRQUVELE1BQU0sQ0FBQyxHQUFHLENBQUM7O0lBQ2IsQ0FBQztDQUFBIiwiZmlsZSI6ImFzeW5jaXRlcmFibGUvX2dyb3VwaW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAaWdub3JlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVHcm91cGluZzxUU291cmNlLCBUS2V5LCBUVmFsdWU+KFxuICAgIHNvdXJjZTogQXN5bmNJdGVyYWJsZTxUU291cmNlPixcbiAgICBrZXlTZWxlY3RvcjogKHZhbHVlOiBUU291cmNlKSA9PiBUS2V5IHwgUHJvbWlzZTxUS2V5PixcbiAgICBlbGVtZW50U2VsZWN0b3I6ICh2YWx1ZTogVFNvdXJjZSkgPT4gVFZhbHVlIHwgUHJvbWlzZTxUVmFsdWU+KTogUHJvbWlzZTxNYXA8VEtleSwgVFZhbHVlW10+PiB7XG4gIGxldCBtYXAgPSBuZXcgTWFwPFRLZXksIFRWYWx1ZVtdPigpO1xuICBmb3IgYXdhaXQgKGxldCBpdGVtIG9mIHNvdXJjZSkge1xuICAgIGxldCBrZXkgPSBhd2FpdCBrZXlTZWxlY3RvcihpdGVtKTtcbiAgICBsZXQgZ3JvdXBpbmcgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKCFtYXAuaGFzKGtleSkpIHtcbiAgICAgIGdyb3VwaW5nID0gW107XG4gICAgICBtYXAuc2V0KGtleSwgZ3JvdXBpbmcpO1xuICAgIH1cbiAgICBsZXQgZWxlbWVudCA9IGF3YWl0IGVsZW1lbnRTZWxlY3RvcihpdGVtKTtcbiAgICBncm91cGluZyEucHVzaChlbGVtZW50KTtcbiAgfVxuXG4gIHJldHVybiBtYXA7XG59XG4iXX0=
