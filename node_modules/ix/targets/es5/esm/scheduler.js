var ActionSubscription = (function () {
    function ActionSubscription(action) {
        this.isUnsubscribed = false;
        this._action = action;
    }
    ActionSubscription.prototype.unsubscribe = function () {
        if (!this.isUnsubscribed) {
            this.isUnsubscribed = true;
            this._action();
        }
    };
    return ActionSubscription;
}());
var DefaultScheduler = (function () {
    function DefaultScheduler() {
    }
    Object.defineProperty(DefaultScheduler.prototype, "now", {
        get: function () {
            return Date.now();
        },
        enumerable: true,
        configurable: true
    });
    DefaultScheduler.prototype.delay = function (dueTime) {
        return new Promise(function (res) { return setTimeout(res, dueTime); });
    };
    DefaultScheduler.prototype.schedule = function (action, dueTime) {
        var id = setTimeout(function () { return action(); }, dueTime);
        return new ActionSubscription(function () { return clearTimeout(id); });
    };
    return DefaultScheduler;
}());
export { DefaultScheduler };

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFVQTtJQUlFLDRCQUFZLE1BQWtCO1FBSHZCLG1CQUFjLEdBQUcsS0FBSyxDQUFDO1FBSTVCLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0lBQ3hCLENBQUM7SUFFRCx3Q0FBVyxHQUFYO1FBQ0UsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQztZQUN6QixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztZQUMzQixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakIsQ0FBQztJQUNILENBQUM7SUFDSCx5QkFBQztBQUFELENBZEEsQUFjQyxJQUFBO0FBRUQ7SUFBQTtJQWFBLENBQUM7SUFaQyxzQkFBSSxpQ0FBRzthQUFQO1lBQ0UsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUNwQixDQUFDOzs7T0FBQTtJQUVELGdDQUFLLEdBQUwsVUFBTSxPQUFlO1FBQ25CLE1BQU0sQ0FBQyxJQUFJLE9BQU8sQ0FBTyxVQUFBLEdBQUcsSUFBSSxPQUFBLFVBQVUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxDQUFDLEVBQXhCLENBQXdCLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRUQsbUNBQVEsR0FBUixVQUFTLE1BQWtCLEVBQUUsT0FBZTtRQUMxQyxJQUFNLEVBQUUsR0FBRyxVQUFVLENBQUMsY0FBTSxPQUFBLE1BQU0sRUFBRSxFQUFSLENBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztRQUMvQyxNQUFNLENBQUMsSUFBSSxrQkFBa0IsQ0FBQyxjQUFNLE9BQUEsWUFBWSxDQUFDLEVBQUUsQ0FBQyxFQUFoQixDQUFnQixDQUFDLENBQUM7SUFDeEQsQ0FBQztJQUNILHVCQUFDO0FBQUQsQ0FiQSxBQWFDLElBQUEiLCJmaWxlIjoic2NoZWR1bGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi9zdWJzY3JpcHRpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNjaGVkdWxlciB7XG4gIHJlYWRvbmx5IG5vdzogbnVtYmVyO1xuICBkZWxheSh0aW1lOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+O1xuICBzY2hlZHVsZShcbiAgICBhY3Rpb246ICgpID0+IHZvaWQsXG4gICAgZHVlVGltZTogbnVtYmVyKTogU3Vic2NyaXB0aW9uO1xufVxuXG5jbGFzcyBBY3Rpb25TdWJzY3JpcHRpb24gaW1wbGVtZW50cyBTdWJzY3JpcHRpb24ge1xuICBwdWJsaWMgaXNVbnN1YnNjcmliZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfYWN0aW9uOiAoKSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGFjdGlvbjogKCkgPT4gdm9pZCkge1xuICAgIHRoaXMuX2FjdGlvbiA9IGFjdGlvbjtcbiAgfVxuXG4gIHVuc3Vic2NyaWJlKCkge1xuICAgIGlmICghdGhpcy5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgdGhpcy5pc1Vuc3Vic2NyaWJlZCA9IHRydWU7XG4gICAgICB0aGlzLl9hY3Rpb24oKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIERlZmF1bHRTY2hlZHVsZXIgaW1wbGVtZW50cyBTY2hlZHVsZXIge1xuICBnZXQgbm93KCkge1xuICAgIHJldHVybiBEYXRlLm5vdygpO1xuICB9XG5cbiAgZGVsYXkoZHVlVGltZTogbnVtYmVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHZvaWQ+KHJlcyA9PiBzZXRUaW1lb3V0KHJlcywgZHVlVGltZSkpO1xuICB9XG5cbiAgc2NoZWR1bGUoYWN0aW9uOiAoKSA9PiB2b2lkLCBkdWVUaW1lOiBudW1iZXIpOiBTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0IGlkID0gc2V0VGltZW91dCgoKSA9PiBhY3Rpb24oKSwgZHVlVGltZSk7XG4gICAgcmV0dXJuIG5ldyBBY3Rpb25TdWJzY3JpcHRpb24oKCkgPT4gY2xlYXJUaW1lb3V0KGlkKSk7XG4gIH1cbn0iXX0=
