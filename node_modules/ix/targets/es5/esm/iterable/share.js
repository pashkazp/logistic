import * as tslib_1 from "tslib";
import { IterableX } from '../iterable';
import { create } from './create';
var SharedIterable = (function (_super) {
    tslib_1.__extends(SharedIterable, _super);
    function SharedIterable(it) {
        var _this = _super.call(this) || this;
        _this._it = it;
        return _this;
    }
    SharedIterable.prototype[Symbol.iterator] = function () {
        return this._it;
    };
    return SharedIterable;
}(IterableX));
export function share(source, fn) {
    return fn ?
        create(function () { return fn(new SharedIterable(source[Symbol.iterator]()))[Symbol.iterator](); }) :
        new SharedIterable(source[Symbol.iterator]());
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL3NoYXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQ3hDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxVQUFVLENBQUM7QUFFbEM7SUFBZ0MsMENBQVk7SUFHMUMsd0JBQVksRUFBZTtRQUEzQixZQUNFLGlCQUFPLFNBRVI7UUFEQyxLQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQzs7SUFDaEIsQ0FBQztJQUVELHlCQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBakI7UUFDRSxNQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztJQUNsQixDQUFDO0lBQ0gscUJBQUM7QUFBRCxDQVhBLEFBV0MsQ0FYK0IsU0FBUyxHQVd4QztBQU1ELE1BQU0sZ0JBQ0YsTUFBeUIsRUFDekIsRUFBb0Q7SUFDdEQsTUFBTSxDQUFDLEVBQUU7UUFDUCxNQUFNLENBQUMsY0FBTSxPQUFBLEVBQUUsQ0FBQyxJQUFJLGNBQWMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFwRSxDQUFvRSxDQUFDO1FBQ2xGLElBQUksY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2xELENBQUMiLCJmaWxlIjoiaXRlcmFibGUvc2hhcmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJdGVyYWJsZVggfSBmcm9tICcuLi9pdGVyYWJsZSc7XG5pbXBvcnQgeyBjcmVhdGUgfSBmcm9tICcuL2NyZWF0ZSc7XG5cbmNsYXNzIFNoYXJlZEl0ZXJhYmxlPFQ+IGV4dGVuZHMgSXRlcmFibGVYPFQ+IHtcbiAgcHJpdmF0ZSBfaXQ6IEl0ZXJhdG9yPFQ+O1xuXG4gIGNvbnN0cnVjdG9yKGl0OiBJdGVyYXRvcjxUPikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5faXQgPSBpdDtcbiAgfVxuXG4gIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIHJldHVybiB0aGlzLl9pdDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hhcmU8VFNvdXJjZT4oc291cmNlOiBJdGVyYWJsZTxUU291cmNlPik6IEl0ZXJhYmxlWDxUU291cmNlPjtcbmV4cG9ydCBmdW5jdGlvbiBzaGFyZTxUU291cmNlLCBUUmVzdWx0PihcbiAgICBzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIGZuPzogKHZhbHVlOiBJdGVyYWJsZTxUU291cmNlPikgPT4gSXRlcmFibGU8VFJlc3VsdD4pOiBJdGVyYWJsZVg8VFJlc3VsdD47XG5leHBvcnQgZnVuY3Rpb24gc2hhcmU8VFNvdXJjZSwgVFJlc3VsdD4oXG4gICAgc291cmNlOiBJdGVyYWJsZTxUU291cmNlPixcbiAgICBmbj86ICh2YWx1ZTogSXRlcmFibGU8VFNvdXJjZT4pID0+IEl0ZXJhYmxlPFRSZXN1bHQ+KTogSXRlcmFibGVYPFRTb3VyY2UgfCBUUmVzdWx0PiB7XG4gIHJldHVybiBmbiA/XG4gICAgY3JlYXRlKCgpID0+IGZuKG5ldyBTaGFyZWRJdGVyYWJsZShzb3VyY2VbU3ltYm9sLml0ZXJhdG9yXSgpKSlbU3ltYm9sLml0ZXJhdG9yXSgpKSA6XG4gICAgbmV3IFNoYXJlZEl0ZXJhYmxlKHNvdXJjZVtTeW1ib2wuaXRlcmF0b3JdKCkpO1xufVxuIl19
