import * as tslib_1 from "tslib";
import { AsyncIterableX } from '../asynciterable';
var ConcatAllAsyncIterable = (function (_super) {
    tslib_1.__extends(ConcatAllAsyncIterable, _super);
    function ConcatAllAsyncIterable(source) {
        var _this = _super.call(this) || this;
        _this._source = source;
        return _this;
    }
    ConcatAllAsyncIterable.prototype[Symbol.asyncIterator] = function () {
        return tslib_1.__asyncGenerator(this, arguments, function _a() {
            var _a, _b, outer, outer_1, outer_1_1, item, e_1_1, e_2_1, e_2, _c, e_1, _d;
            return tslib_1.__generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _e.trys.push([0, 19, 20, 25]);
                        _a = tslib_1.__asyncValues(this._source);
                        _e.label = 1;
                    case 1: return [4 /*yield*/, tslib_1.__await(_a.next())];
                    case 2:
                        if (!(_b = _e.sent(), !_b.done)) return [3 /*break*/, 18];
                        return [4 /*yield*/, tslib_1.__await(_b.value)];
                    case 3:
                        outer = _e.sent();
                        _e.label = 4;
                    case 4:
                        _e.trys.push([4, 11, 12, 17]);
                        outer_1 = tslib_1.__asyncValues(outer);
                        _e.label = 5;
                    case 5: return [4 /*yield*/, tslib_1.__await(outer_1.next())];
                    case 6:
                        if (!(outer_1_1 = _e.sent(), !outer_1_1.done)) return [3 /*break*/, 10];
                        return [4 /*yield*/, tslib_1.__await(outer_1_1.value)];
                    case 7:
                        item = _e.sent();
                        return [4 /*yield*/, item];
                    case 8:
                        _e.sent();
                        _e.label = 9;
                    case 9: return [3 /*break*/, 5];
                    case 10: return [3 /*break*/, 17];
                    case 11:
                        e_1_1 = _e.sent();
                        e_1 = { error: e_1_1 };
                        return [3 /*break*/, 17];
                    case 12:
                        _e.trys.push([12, , 15, 16]);
                        if (!(outer_1_1 && !outer_1_1.done && (_d = outer_1.return))) return [3 /*break*/, 14];
                        return [4 /*yield*/, tslib_1.__await(_d.call(outer_1))];
                    case 13:
                        _e.sent();
                        _e.label = 14;
                    case 14: return [3 /*break*/, 16];
                    case 15:
                        if (e_1) throw e_1.error;
                        return [7 /*endfinally*/];
                    case 16: return [7 /*endfinally*/];
                    case 17: return [3 /*break*/, 1];
                    case 18: return [3 /*break*/, 25];
                    case 19:
                        e_2_1 = _e.sent();
                        e_2 = { error: e_2_1 };
                        return [3 /*break*/, 25];
                    case 20:
                        _e.trys.push([20, , 23, 24]);
                        if (!(_b && !_b.done && (_c = _a.return))) return [3 /*break*/, 22];
                        return [4 /*yield*/, tslib_1.__await(_c.call(_a))];
                    case 21:
                        _e.sent();
                        _e.label = 22;
                    case 22: return [3 /*break*/, 24];
                    case 23:
                        if (e_2) throw e_2.error;
                        return [7 /*endfinally*/];
                    case 24: return [7 /*endfinally*/];
                    case 25: return [2 /*return*/];
                }
            });
        });
    };
    return ConcatAllAsyncIterable;
}(AsyncIterableX));
var ConcatAsyncIterable = (function (_super) {
    tslib_1.__extends(ConcatAsyncIterable, _super);
    function ConcatAsyncIterable(source) {
        var _this = _super.call(this) || this;
        _this._source = source;
        return _this;
    }
    ConcatAsyncIterable.prototype[Symbol.asyncIterator] = function () {
        return tslib_1.__asyncGenerator(this, arguments, function _a() {
            var _a, _b, outer, outer_2, outer_2_1, item, e_3_1, e_4_1, e_3, _c, e_4, _d;
            return tslib_1.__generator(this, function (_e) {
                switch (_e.label) {
                    case 0:
                        _e.trys.push([0, 17, 18, 19]);
                        _a = tslib_1.__values(this._source), _b = _a.next();
                        _e.label = 1;
                    case 1:
                        if (!!_b.done) return [3 /*break*/, 16];
                        outer = _b.value;
                        _e.label = 2;
                    case 2:
                        _e.trys.push([2, 9, 10, 15]);
                        outer_2 = tslib_1.__asyncValues(outer);
                        _e.label = 3;
                    case 3: return [4 /*yield*/, tslib_1.__await(outer_2.next())];
                    case 4:
                        if (!(outer_2_1 = _e.sent(), !outer_2_1.done)) return [3 /*break*/, 8];
                        return [4 /*yield*/, tslib_1.__await(outer_2_1.value)];
                    case 5:
                        item = _e.sent();
                        return [4 /*yield*/, item];
                    case 6:
                        _e.sent();
                        _e.label = 7;
                    case 7: return [3 /*break*/, 3];
                    case 8: return [3 /*break*/, 15];
                    case 9:
                        e_3_1 = _e.sent();
                        e_3 = { error: e_3_1 };
                        return [3 /*break*/, 15];
                    case 10:
                        _e.trys.push([10, , 13, 14]);
                        if (!(outer_2_1 && !outer_2_1.done && (_c = outer_2.return))) return [3 /*break*/, 12];
                        return [4 /*yield*/, tslib_1.__await(_c.call(outer_2))];
                    case 11:
                        _e.sent();
                        _e.label = 12;
                    case 12: return [3 /*break*/, 14];
                    case 13:
                        if (e_3) throw e_3.error;
                        return [7 /*endfinally*/];
                    case 14: return [7 /*endfinally*/];
                    case 15:
                        _b = _a.next();
                        return [3 /*break*/, 1];
                    case 16: return [3 /*break*/, 19];
                    case 17:
                        e_4_1 = _e.sent();
                        e_4 = { error: e_4_1 };
                        return [3 /*break*/, 19];
                    case 18:
                        try {
                            if (_b && !_b.done && (_d = _a.return)) _d.call(_a);
                        }
                        finally { if (e_4) throw e_4.error; }
                        return [7 /*endfinally*/];
                    case 19: return [2 /*return*/];
                }
            });
        });
    };
    return ConcatAsyncIterable;
}(AsyncIterableX));
export function concatAll(source) {
    return new ConcatAllAsyncIterable(source);
}
export function _concatAll(source) {
    return new ConcatAsyncIterable(source);
}
export function concat(source) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    return new ConcatAsyncIterable(tslib_1.__spread([source], args));
}
export function concatStatic() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    return new ConcatAsyncIterable(args);
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvY29uY2F0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFbEQ7SUFBOEMsa0RBQXVCO0lBR25FLGdDQUFZLE1BQTZDO1FBQXpELFlBQ0UsaUJBQU8sU0FFUjtRQURDLEtBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDOztJQUN4QixDQUFDO0lBRU0saUNBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxHQUE3Qjs7Ozs7Ozt3QkFDMEIsS0FBQSxzQkFBQSxJQUFJLENBQUMsT0FBTyxDQUFBOzs7Ozs7O3dCQUFyQixLQUFLLFlBQUE7Ozs7d0JBQ0ssVUFBQSxzQkFBQSxLQUFLLENBQUE7Ozs7Ozs7d0JBQWIsSUFBSSxZQUFBO3dCQUFhLHFCQUFNLElBQUksRUFBQTs7d0JBQVYsU0FBVSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FFOUM7SUFDSCw2QkFBQztBQUFELENBYkEsQUFhQyxDQWI2QyxjQUFjLEdBYTNEO0FBRUQ7SUFBMkMsK0NBQXVCO0lBR2hFLDZCQUFZLE1BQXdDO1FBQXBELFlBQ0UsaUJBQU8sU0FFUjtRQURDLEtBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDOztJQUN4QixDQUFDO0lBRU0sOEJBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxHQUE3Qjs7Ozs7Ozt3QkFDb0IsS0FBQSxpQkFBQSxJQUFJLENBQUMsT0FBTyxDQUFBOzs7O3dCQUFyQixLQUFLOzs7O3dCQUNXLFVBQUEsc0JBQUEsS0FBSyxDQUFBOzs7Ozs7O3dCQUFiLElBQUksWUFBQTt3QkFBYSxxQkFBTSxJQUFJLEVBQUE7O3dCQUFWLFNBQVUsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7S0FFOUM7SUFDSCwwQkFBQztBQUFELENBYkEsQUFhQyxDQWIwQyxjQUFjLEdBYXhEO0FBRUQsTUFBTSxvQkFBNkIsTUFBNkM7SUFDOUUsTUFBTSxDQUFDLElBQUksc0JBQXNCLENBQVUsTUFBTSxDQUFDLENBQUM7QUFDckQsQ0FBQztBQUVELE1BQU0scUJBQThCLE1BQXdDO0lBQzFFLE1BQU0sQ0FBQyxJQUFJLG1CQUFtQixDQUFVLE1BQU0sQ0FBQyxDQUFDO0FBQ2xELENBQUM7QUFFRCxNQUFNLGlCQUFvQixNQUF3QjtJQUFFLGNBQTJCO1NBQTNCLFVBQTJCLEVBQTNCLHFCQUEyQixFQUEzQixJQUEyQjtRQUEzQiw2QkFBMkI7O0lBQzdFLE1BQU0sQ0FBQyxJQUFJLG1CQUFtQixtQkFBSyxNQUFNLEdBQUssSUFBSSxFQUFFLENBQUM7QUFDdkQsQ0FBQztBQUVELE1BQU07SUFBMEIsY0FBMkI7U0FBM0IsVUFBMkIsRUFBM0IscUJBQTJCLEVBQTNCLElBQTJCO1FBQTNCLHlCQUEyQjs7SUFDekQsTUFBTSxDQUFDLElBQUksbUJBQW1CLENBQUksSUFBSSxDQUFDLENBQUM7QUFDMUMsQ0FBQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL2NvbmNhdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFzeW5jSXRlcmFibGVYIH0gZnJvbSAnLi4vYXN5bmNpdGVyYWJsZSc7XG5cbmNsYXNzIENvbmNhdEFsbEFzeW5jSXRlcmFibGU8VFNvdXJjZT4gZXh0ZW5kcyBBc3luY0l0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHByaXZhdGUgX3NvdXJjZTogQXN5bmNJdGVyYWJsZTxBc3luY0l0ZXJhYmxlPFRTb3VyY2U+PjtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEFzeW5jSXRlcmFibGU8QXN5bmNJdGVyYWJsZTxUU291cmNlPj4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCkge1xuICAgIGZvciBhd2FpdCAobGV0IG91dGVyIG9mIHRoaXMuX3NvdXJjZSkge1xuICAgICAgZm9yIGF3YWl0IChsZXQgaXRlbSBvZiBvdXRlcikgeyB5aWVsZCBpdGVtOyB9XG4gICAgfVxuICB9XG59XG5cbmNsYXNzIENvbmNhdEFzeW5jSXRlcmFibGU8VFNvdXJjZT4gZXh0ZW5kcyBBc3luY0l0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHByaXZhdGUgX3NvdXJjZTogSXRlcmFibGU8QXN5bmNJdGVyYWJsZTxUU291cmNlPj47XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBJdGVyYWJsZTxBc3luY0l0ZXJhYmxlPFRTb3VyY2U+Pikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICB9XG5cbiAgYXN5bmMgKltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgZm9yIChsZXQgb3V0ZXIgb2YgdGhpcy5fc291cmNlKSB7XG4gICAgICBmb3IgYXdhaXQgKGxldCBpdGVtIG9mIG91dGVyKSB7IHlpZWxkIGl0ZW07IH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdEFsbDxUU291cmNlPihzb3VyY2U6IEFzeW5jSXRlcmFibGU8QXN5bmNJdGVyYWJsZTxUU291cmNlPj4pOiBBc3luY0l0ZXJhYmxlWDxUU291cmNlPiB7XG4gIHJldHVybiBuZXcgQ29uY2F0QWxsQXN5bmNJdGVyYWJsZTxUU291cmNlPihzb3VyY2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gX2NvbmNhdEFsbDxUU291cmNlPihzb3VyY2U6IEl0ZXJhYmxlPEFzeW5jSXRlcmFibGU8VFNvdXJjZT4+KTogQXN5bmNJdGVyYWJsZVg8VFNvdXJjZT4ge1xuICByZXR1cm4gbmV3IENvbmNhdEFzeW5jSXRlcmFibGU8VFNvdXJjZT4oc291cmNlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdDxUPihzb3VyY2U6IEFzeW5jSXRlcmFibGU8VD4sIC4uLmFyZ3M6IEFzeW5jSXRlcmFibGU8VD5bXSk6IEFzeW5jSXRlcmFibGVYPFQ+IHtcbiAgcmV0dXJuIG5ldyBDb25jYXRBc3luY0l0ZXJhYmxlPFQ+KFtzb3VyY2UsIC4uLmFyZ3NdKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdFN0YXRpYzxUPiguLi5hcmdzOiBBc3luY0l0ZXJhYmxlPFQ+W10pOiBBc3luY0l0ZXJhYmxlWDxUPiB7XG4gIHJldHVybiBuZXcgQ29uY2F0QXN5bmNJdGVyYWJsZTxUPihhcmdzKTtcbn1cbiJdfQ==
