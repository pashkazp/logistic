Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var iterable_1 = require("../iterable");
var create_1 = require("./create");
var SharedIterable = (function (_super) {
    tslib_1.__extends(SharedIterable, _super);
    function SharedIterable(it) {
        var _this = _super.call(this) || this;
        _this._it = it;
        return _this;
    }
    SharedIterable.prototype[Symbol.iterator] = function () {
        return this._it;
    };
    return SharedIterable;
}(iterable_1.IterableX));
function share(source, fn) {
    return fn ?
        create_1.create(function () { return fn(new SharedIterable(source[Symbol.iterator]()))[Symbol.iterator](); }) :
        new SharedIterable(source[Symbol.iterator]());
}
exports.share = share;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL3NoYXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsd0NBQXdDO0FBQ3hDLG1DQUFrQztBQUVsQztJQUFnQywwQ0FBWTtJQUcxQyx3QkFBWSxFQUFlO1FBQTNCLFlBQ0UsaUJBQU8sU0FFUjtRQURDLEtBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDOztJQUNoQixDQUFDO0lBRUQseUJBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFqQjtRQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ2xCLENBQUM7SUFDSCxxQkFBQztBQUFELENBWEEsQUFXQyxDQVgrQixvQkFBUyxHQVd4QztBQU1ELGVBQ0ksTUFBeUIsRUFDekIsRUFBb0Q7SUFDdEQsTUFBTSxDQUFDLEVBQUU7UUFDUCxlQUFNLENBQUMsY0FBTSxPQUFBLEVBQUUsQ0FBQyxJQUFJLGNBQWMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFwRSxDQUFvRSxDQUFDO1FBQ2xGLElBQUksY0FBYyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQ2xELENBQUM7QUFORCxzQkFNQyIsImZpbGUiOiJpdGVyYWJsZS9zaGFyZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlWCB9IGZyb20gJy4uL2l0ZXJhYmxlJztcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gJy4vY3JlYXRlJztcblxuY2xhc3MgU2hhcmVkSXRlcmFibGU8VD4gZXh0ZW5kcyBJdGVyYWJsZVg8VD4ge1xuICBwcml2YXRlIF9pdDogSXRlcmF0b3I8VD47XG5cbiAgY29uc3RydWN0b3IoaXQ6IEl0ZXJhdG9yPFQ+KSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9pdCA9IGl0O1xuICB9XG5cbiAgW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2l0O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaGFyZTxUU291cmNlPihzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+KTogSXRlcmFibGVYPFRTb3VyY2U+O1xuZXhwb3J0IGZ1bmN0aW9uIHNoYXJlPFRTb3VyY2UsIFRSZXN1bHQ+KFxuICAgIHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sXG4gICAgZm4/OiAodmFsdWU6IEl0ZXJhYmxlPFRTb3VyY2U+KSA9PiBJdGVyYWJsZTxUUmVzdWx0Pik6IEl0ZXJhYmxlWDxUUmVzdWx0PjtcbmV4cG9ydCBmdW5jdGlvbiBzaGFyZTxUU291cmNlLCBUUmVzdWx0PihcbiAgICBzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+LFxuICAgIGZuPzogKHZhbHVlOiBJdGVyYWJsZTxUU291cmNlPikgPT4gSXRlcmFibGU8VFJlc3VsdD4pOiBJdGVyYWJsZVg8VFNvdXJjZSB8IFRSZXN1bHQ+IHtcbiAgcmV0dXJuIGZuID9cbiAgICBjcmVhdGUoKCkgPT4gZm4obmV3IFNoYXJlZEl0ZXJhYmxlKHNvdXJjZVtTeW1ib2wuaXRlcmF0b3JdKCkpKVtTeW1ib2wuaXRlcmF0b3JdKCkpIDpcbiAgICBuZXcgU2hhcmVkSXRlcmFibGUoc291cmNlW1N5bWJvbC5pdGVyYXRvcl0oKSk7XG59XG4iXX0=
