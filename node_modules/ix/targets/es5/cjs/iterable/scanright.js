Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var iterable_1 = require("../iterable");
var toarray_1 = require("./toarray");
var ScanRightIterable = (function (_super) {
    tslib_1.__extends(ScanRightIterable, _super);
    function ScanRightIterable(source, fn) {
        var args = [];
        for (var _i = 2; _i < arguments.length; _i++) {
            args[_i - 2] = arguments[_i];
        }
        var _this = _super.call(this) || this;
        _this._source = source;
        _this._fn = fn;
        _this._hasSeed = args.length === 1;
        _this._seed = args[0];
        return _this;
    }
    ScanRightIterable.prototype[Symbol.iterator] = function () {
        var hasValue, source, offset, item;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    hasValue = false;
                    source = toarray_1.toArray(this._source);
                    offset = source.length - 1;
                    _a.label = 1;
                case 1:
                    if (!(offset >= 0)) return [3 /*break*/, 5];
                    item = source[offset];
                    if (!(hasValue || (hasValue = this._hasSeed))) return [3 /*break*/, 3];
                    this._seed = this._fn(this._seed, item, offset);
                    return [4 /*yield*/, this._seed];
                case 2:
                    _a.sent();
                    return [3 /*break*/, 4];
                case 3:
                    this._seed = item;
                    hasValue = true;
                    _a.label = 4;
                case 4:
                    offset--;
                    return [3 /*break*/, 1];
                case 5: return [2 /*return*/];
            }
        });
    };
    return ScanRightIterable;
}(iterable_1.IterableX));
function scanRight(source, accumulator) {
    var args = [];
    for (var _i = 2; _i < arguments.length; _i++) {
        args[_i - 2] = arguments[_i];
    }
    return new (ScanRightIterable.bind.apply(ScanRightIterable, tslib_1.__spread([void 0, source, accumulator], args)))();
}
exports.scanRight = scanRight;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL3NjYW5yaWdodC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLHdDQUF3QztBQUN4QyxxQ0FBb0M7QUFFcEM7SUFBc0MsNkNBQVk7SUFNaEQsMkJBQ0ksTUFBbUIsRUFDbkIsRUFBMEM7UUFDMUMsY0FBa0I7YUFBbEIsVUFBa0IsRUFBbEIscUJBQWtCLEVBQWxCLElBQWtCO1lBQWxCLDZCQUFrQjs7UUFIdEIsWUFJRSxpQkFBTyxTQUtSO1FBSkMsS0FBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFDdEIsS0FBSSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUM7UUFDZCxLQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxNQUFNLEtBQUssQ0FBQyxDQUFDO1FBQ2xDLEtBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQUN2QixDQUFDO0lBRUEsNEJBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFsQjs7Ozs7b0JBQ00sUUFBUSxHQUFHLEtBQUssQ0FBQztvQkFDZixNQUFNLEdBQUcsaUJBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7b0JBQzVCLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUM7Ozt5QkFBRSxDQUFBLE1BQU0sSUFBSSxDQUFDLENBQUE7b0JBQ3hDLElBQUksR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7eUJBQ3hCLENBQUEsUUFBUSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQSxFQUF0Qyx3QkFBc0M7b0JBQ3hDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBSSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztvQkFDbkQscUJBQU0sSUFBSSxDQUFDLEtBQUssRUFBQTs7b0JBQWhCLFNBQWdCLENBQUM7OztvQkFFakIsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7b0JBQ2xCLFFBQVEsR0FBRyxJQUFJLENBQUM7OztvQkFQOEIsTUFBTSxFQUFFLENBQUE7Ozs7O0tBVTNEO0lBQ0gsd0JBQUM7QUFBRCxDQS9CQSxBQStCQyxDQS9CcUMsb0JBQVMsR0ErQjlDO0FBU0QsbUJBQ0ksTUFBbUIsRUFDbkIsV0FBdUQ7SUFDdkQsY0FBa0I7U0FBbEIsVUFBa0IsRUFBbEIscUJBQWtCLEVBQWxCLElBQWtCO1FBQWxCLDZCQUFrQjs7SUFDcEIsTUFBTSxNQUFLLGlCQUFpQixZQUFqQixpQkFBaUIsNEJBQUMsTUFBTSxFQUFFLFdBQVcsR0FBSyxJQUFJLE1BQUU7QUFDN0QsQ0FBQztBQUxELDhCQUtDIiwiZmlsZSI6Iml0ZXJhYmxlL3NjYW5yaWdodC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEl0ZXJhYmxlWCB9IGZyb20gJy4uL2l0ZXJhYmxlJztcbmltcG9ydCB7IHRvQXJyYXkgfSBmcm9tICcuL3RvYXJyYXknO1xuXG5jbGFzcyBTY2FuUmlnaHRJdGVyYWJsZTxULCBSPiBleHRlbmRzIEl0ZXJhYmxlWDxSPiB7XG4gIHByaXZhdGUgX3NvdXJjZTogSXRlcmFibGU8VD47XG4gIHByaXZhdGUgX2ZuOiAoYWNjOiBUIHwgUiwgeDogVCwgaW5kZXg6IG51bWJlcikgPT4gUjtcbiAgcHJpdmF0ZSBfc2VlZD86IFQgfCBSO1xuICBwcml2YXRlIF9oYXNTZWVkOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgc291cmNlOiBJdGVyYWJsZTxUPixcbiAgICAgIGZuOiAoYWNjOiBUIHwgUiwgeDogVCwgaW5kZXg6IG51bWJlcikgPT4gUixcbiAgICAgIC4uLmFyZ3M6IChUIHwgUilbXSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuX2ZuID0gZm47XG4gICAgdGhpcy5faGFzU2VlZCA9IGFyZ3MubGVuZ3RoID09PSAxO1xuICAgIHRoaXMuX3NlZWQgPSBhcmdzWzBdO1xuICB9XG5cbiAgKltTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgIGxldCBoYXNWYWx1ZSA9IGZhbHNlO1xuICAgIGNvbnN0IHNvdXJjZSA9IHRvQXJyYXkodGhpcy5fc291cmNlKTtcbiAgICBmb3IgKGxldCBvZmZzZXQgPSBzb3VyY2UubGVuZ3RoIC0gMTsgb2Zmc2V0ID49IDA7IG9mZnNldC0tKSB7XG4gICAgICBjb25zdCBpdGVtID0gc291cmNlW29mZnNldF07XG4gICAgICBpZiAoaGFzVmFsdWUgfHwgKGhhc1ZhbHVlID0gdGhpcy5faGFzU2VlZCkpIHtcbiAgICAgICAgdGhpcy5fc2VlZCA9IHRoaXMuX2ZuKDxSPnRoaXMuX3NlZWQsIGl0ZW0sIG9mZnNldCk7XG4gICAgICAgIHlpZWxkIHRoaXMuX3NlZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9zZWVkID0gaXRlbTtcbiAgICAgICAgaGFzVmFsdWUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2NhblJpZ2h0PFQ+KFxuICBzb3VyY2U6IEl0ZXJhYmxlPFQ+LFxuICBhY2N1bXVsYXRvcjogKGFjYzogVCwgdmFsdWU6IFQsIGluZGV4OiBudW1iZXIpID0+IFQpOiBJdGVyYWJsZVg8VD47XG5leHBvcnQgZnVuY3Rpb24gc2NhblJpZ2h0PFQsIFIgPSBUPihcbiAgc291cmNlOiBJdGVyYWJsZTxUPixcbiAgYWNjdW11bGF0b3I6IChhY2M6IFIsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiBSLFxuICBzZWVkOiBSKTogSXRlcmFibGVYPFI+O1xuZXhwb3J0IGZ1bmN0aW9uIHNjYW5SaWdodDxULCBSID0gVD4oXG4gICAgc291cmNlOiBJdGVyYWJsZTxUPixcbiAgICBhY2N1bXVsYXRvcjogKGFjYzogVCB8IFIsIHZhbHVlOiBULCBpbmRleDogbnVtYmVyKSA9PiBSLFxuICAgIC4uLmFyZ3M6IChUIHwgUilbXSk6IEl0ZXJhYmxlWDxUIHwgUj4ge1xuICByZXR1cm4gbmV3IFNjYW5SaWdodEl0ZXJhYmxlKHNvdXJjZSwgYWNjdW11bGF0b3IsIC4uLmFyZ3MpO1xufVxuIl19
