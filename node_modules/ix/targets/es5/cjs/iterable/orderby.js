Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var iterable_1 = require("../iterable");
var sorter_1 = require("../internal/sorter");
var OrderedIterableBaseX = (function (_super) {
    tslib_1.__extends(OrderedIterableBaseX, _super);
    function OrderedIterableBaseX(source) {
        var _this = _super.call(this) || this;
        _this._source = source;
        return _this;
    }
    OrderedIterableBaseX.prototype[Symbol.iterator] = function () {
        var array, len, indices, i, len_1, indices_1, indices_1_1, index, e_1_1, e_1, _a;
        return tslib_1.__generator(this, function (_b) {
            switch (_b.label) {
                case 0:
                    array = Array.from(this._source);
                    len = array.length;
                    indices = new Array(len);
                    for (i = 0, len_1 = array.length; i < len_1; i++) {
                        indices[i] = i;
                    }
                    indices.sort(this._getSorter(array));
                    _b.label = 1;
                case 1:
                    _b.trys.push([1, 6, 7, 8]);
                    indices_1 = tslib_1.__values(indices), indices_1_1 = indices_1.next();
                    _b.label = 2;
                case 2:
                    if (!!indices_1_1.done) return [3 /*break*/, 5];
                    index = indices_1_1.value;
                    return [4 /*yield*/, array[index]];
                case 3:
                    _b.sent();
                    _b.label = 4;
                case 4:
                    indices_1_1 = indices_1.next();
                    return [3 /*break*/, 2];
                case 5: return [3 /*break*/, 8];
                case 6:
                    e_1_1 = _b.sent();
                    e_1 = { error: e_1_1 };
                    return [3 /*break*/, 8];
                case 7:
                    try {
                        if (indices_1_1 && !indices_1_1.done && (_a = indices_1.return)) _a.call(indices_1);
                    }
                    finally { if (e_1) throw e_1.error; }
                    return [7 /*endfinally*/];
                case 8: return [2 /*return*/];
            }
        });
    };
    OrderedIterableBaseX.prototype.thenBy = function (keySelector, comparer) {
        if (comparer === void 0) { comparer = sorter_1.sorter; }
        /* tslint:disable-next-line: no-use-before-declare */
        return new OrderedIterableX(this._source, keySelector, comparer, false, this);
    };
    OrderedIterableBaseX.prototype.thenByDescending = function (keySelector, comparer) {
        if (comparer === void 0) { comparer = sorter_1.sorter; }
        /* tslint:disable-next-line: no-use-before-declare */
        return new OrderedIterableX(this._source, keySelector, comparer, true, this);
    };
    return OrderedIterableBaseX;
}(iterable_1.IterableX));
exports.OrderedIterableBaseX = OrderedIterableBaseX;
var OrderedIterableX = (function (_super) {
    tslib_1.__extends(OrderedIterableX, _super);
    function OrderedIterableX(source, keySelector, comparer, descending, parent) {
        var _this = _super.call(this, source) || this;
        _this._keySelector = keySelector;
        _this._comparer = comparer;
        _this._descending = descending;
        _this._parent = parent;
        return _this;
    }
    OrderedIterableX.prototype._getSorter = function (elements, next) {
        var keys = elements.map(this._keySelector);
        var comparer = this._comparer;
        var parent = this._parent;
        var descending = this._descending;
        var sorter = function (x, y) {
            var result = comparer(keys[x], keys[y]);
            if (result === 0) {
                return next ? next(x, y) : x - y;
            }
            return descending ? -result : result;
        };
        return parent ? parent._getSorter(elements, sorter) : sorter;
    };
    return OrderedIterableX;
}(OrderedIterableBaseX));
exports.OrderedIterableX = OrderedIterableX;
function orderBy(source, keySelector, comparer) {
    if (comparer === void 0) { comparer = sorter_1.sorter; }
    return new OrderedIterableX(source, keySelector, comparer, false);
}
exports.orderBy = orderBy;
function orderByDescending(source, keySelector, comparer) {
    if (comparer === void 0) { comparer = sorter_1.sorter; }
    return new OrderedIterableX(source, keySelector, comparer, true);
}
exports.orderByDescending = orderByDescending;
function thenBy(source, keySelector, comparer) {
    if (comparer === void 0) { comparer = sorter_1.sorter; }
    return new OrderedIterableX(source._source, keySelector, comparer, false, source);
}
exports.thenBy = thenBy;
function thenByDescending(source, keySelector, comparer) {
    if (comparer === void 0) { comparer = sorter_1.sorter; }
    return new OrderedIterableX(source._source, keySelector, comparer, true, source);
}
exports.thenByDescending = thenByDescending;

//# sourceMappingURL=data:application/json;charset=utf8;base64,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TEQsd0JBS0M7QUFFRCwwQkFDTSxNQUFxQyxFQUNyQyxXQUFvQyxFQUNwQyxRQUEwRDtJQUExRCx5QkFBQSxFQUFBLFdBQTZDLGVBQWE7SUFDOUQsTUFBTSxDQUFDLElBQUksZ0JBQWdCLENBQWdCLE1BQU0sQ0FBQyxPQUFPLEVBQUUsV0FBVyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDbEcsQ0FBQztBQUxELDRDQUtDIiwiZmlsZSI6Iml0ZXJhYmxlL29yZGVyYnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJdGVyYWJsZVggfSBmcm9tICcuLi9pdGVyYWJsZSc7XG5pbXBvcnQgeyBzb3J0ZXIgYXMgZGVmYXVsdFNvcnRlciB9IGZyb20gJy4uL2ludGVybmFsL3NvcnRlcic7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBPcmRlcmVkSXRlcmFibGVCYXNlWDxUU291cmNlPiBleHRlbmRzIEl0ZXJhYmxlWDxUU291cmNlPiB7XG4gIF9zb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+O1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX3NvdXJjZSA9IHNvdXJjZTtcbiAgfVxuXG4gICpbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICBjb25zdCBhcnJheSA9IEFycmF5LmZyb208VFNvdXJjZT4odGhpcy5fc291cmNlKTtcbiAgICBjb25zdCBsZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgY29uc3QgaW5kaWNlcyA9IG5ldyBBcnJheTxudW1iZXI+KGxlbik7XG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBpbmRpY2VzW2ldID0gaTtcbiAgICB9XG5cbiAgICBpbmRpY2VzLnNvcnQodGhpcy5fZ2V0U29ydGVyKGFycmF5KSk7XG4gICAgZm9yIChjb25zdCBpbmRleCBvZiBpbmRpY2VzKSB7XG4gICAgICB5aWVsZCBhcnJheVtpbmRleF07XG4gICAgfVxuICB9XG5cbiAgdGhlbkJ5PFRLZXk+KFxuICAgICAga2V5U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBUS2V5LFxuICAgICAgY29tcGFyZXI6IChmc3Q6IFRLZXksIHNuZDogVEtleSkgPT4gbnVtYmVyID0gZGVmYXVsdFNvcnRlcik6IE9yZGVyZWRJdGVyYWJsZUJhc2VYPFRTb3VyY2U+IHtcbiAgICAvKiB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG5vLXVzZS1iZWZvcmUtZGVjbGFyZSAqL1xuICAgIHJldHVybiBuZXcgT3JkZXJlZEl0ZXJhYmxlWDxUS2V5LCBUU291cmNlPih0aGlzLl9zb3VyY2UsIGtleVNlbGVjdG9yLCBjb21wYXJlciwgZmFsc2UsIHRoaXMpO1xuICB9XG5cbiAgdGhlbkJ5RGVzY2VuZGluZzxUS2V5PihcbiAgICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSxcbiAgICAgIGNvbXBhcmVyOiAoZnN0OiBUS2V5LCBzbmQ6IFRLZXkpID0+IG51bWJlciA9IGRlZmF1bHRTb3J0ZXIpOiBPcmRlcmVkSXRlcmFibGVCYXNlWDxUU291cmNlPiB7XG4gICAgLyogdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBuby11c2UtYmVmb3JlLWRlY2xhcmUgKi9cbiAgICByZXR1cm4gbmV3IE9yZGVyZWRJdGVyYWJsZVg8VEtleSwgVFNvdXJjZT4odGhpcy5fc291cmNlLCBrZXlTZWxlY3RvciwgY29tcGFyZXIsIHRydWUsIHRoaXMpO1xuICB9XG5cbiAgYWJzdHJhY3QgX2dldFNvcnRlcihcbiAgICBlbGVtZW50czogVFNvdXJjZVtdLFxuICAgIG5leHQ/OiAoeDogbnVtYmVyLCB5OiBudW1iZXIpID0+IG51bWJlcik6ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgT3JkZXJlZEl0ZXJhYmxlWDxUS2V5LCBUU291cmNlPiBleHRlbmRzIE9yZGVyZWRJdGVyYWJsZUJhc2VYPFRTb3VyY2U+IHtcbiAgcHJpdmF0ZSBfa2V5U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBUS2V5O1xuICBwcml2YXRlIF9jb21wYXJlcjogKGZzdDogVEtleSwgc25kOiBUS2V5KSA9PiBudW1iZXI7XG4gIHByaXZhdGUgX2Rlc2NlbmRpbmc6IGJvb2xlYW47XG4gIHByaXZhdGUgX3BhcmVudD86IE9yZGVyZWRJdGVyYWJsZUJhc2VYPFRTb3VyY2U+O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgc291cmNlOiBJdGVyYWJsZTxUU291cmNlPixcbiAgICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSxcbiAgICAgIGNvbXBhcmVyOiAoZnN0OiBUS2V5LCBzbmQ6IFRLZXkpID0+IG51bWJlcixcbiAgICAgIGRlc2NlbmRpbmc6IGJvb2xlYW4sXG4gICAgICBwYXJlbnQ/OiBPcmRlcmVkSXRlcmFibGVCYXNlWDxUU291cmNlPikge1xuICAgIHN1cGVyKHNvdXJjZSk7XG4gICAgdGhpcy5fa2V5U2VsZWN0b3IgPSBrZXlTZWxlY3RvcjtcbiAgICB0aGlzLl9jb21wYXJlciA9IGNvbXBhcmVyO1xuICAgIHRoaXMuX2Rlc2NlbmRpbmcgPSBkZXNjZW5kaW5nO1xuICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcbiAgfVxuXG4gIF9nZXRTb3J0ZXIoXG4gICAgICBlbGVtZW50czogVFNvdXJjZVtdLFxuICAgICAgbmV4dD86ICh4OiBudW1iZXIsIHk6IG51bWJlcikgPT4gbnVtYmVyKTogKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiBudW1iZXIge1xuICAgIGNvbnN0IGtleXMgPSBlbGVtZW50cy5tYXAodGhpcy5fa2V5U2VsZWN0b3IpO1xuICAgIGNvbnN0IGNvbXBhcmVyID0gdGhpcy5fY29tcGFyZXI7XG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5fcGFyZW50O1xuICAgIGNvbnN0IGRlc2NlbmRpbmcgPSB0aGlzLl9kZXNjZW5kaW5nO1xuICAgIGNvbnN0IHNvcnRlciA9ICh4OiBudW1iZXIsIHk6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBjb21wYXJlcihrZXlzW3hdLCBrZXlzW3ldKTtcbiAgICAgIGlmIChyZXN1bHQgPT09IDApIHtcbiAgICAgICAgcmV0dXJuIG5leHQgPyBuZXh0KHgsIHkpIDogeCAtIHk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBkZXNjZW5kaW5nID8gLXJlc3VsdCA6IHJlc3VsdDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHBhcmVudCA/IHBhcmVudC5fZ2V0U29ydGVyKGVsZW1lbnRzLCBzb3J0ZXIpIDogc29ydGVyO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcmRlckJ5PFRLZXksIFRTb3VyY2U+KFxuICAgICAgc291cmNlOiBJdGVyYWJsZTxUU291cmNlPixcbiAgICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSxcbiAgICAgIGNvbXBhcmVyOiAoZnN0OiBUS2V5LCBzbmQ6IFRLZXkpID0+IG51bWJlciA9IGRlZmF1bHRTb3J0ZXIpOiBPcmRlcmVkSXRlcmFibGVYPFRLZXksIFRTb3VyY2U+IHtcbiAgcmV0dXJuIG5ldyBPcmRlcmVkSXRlcmFibGVYPFRLZXksIFRTb3VyY2U+KHNvdXJjZSwga2V5U2VsZWN0b3IsIGNvbXBhcmVyLCBmYWxzZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvcmRlckJ5RGVzY2VuZGluZzxUS2V5LCBUU291cmNlPihcbiAgICAgIHNvdXJjZTogSXRlcmFibGU8VFNvdXJjZT4sXG4gICAgICBrZXlTZWxlY3RvcjogKGl0ZW06IFRTb3VyY2UpID0+IFRLZXksXG4gICAgICBjb21wYXJlcjogKGZzdDogVEtleSwgc25kOiBUS2V5KSA9PiBudW1iZXIgPSBkZWZhdWx0U29ydGVyKTogT3JkZXJlZEl0ZXJhYmxlWDxUS2V5LCBUU291cmNlPiB7XG4gIHJldHVybiBuZXcgT3JkZXJlZEl0ZXJhYmxlWDxUS2V5LCBUU291cmNlPihzb3VyY2UsIGtleVNlbGVjdG9yLCBjb21wYXJlciwgdHJ1ZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aGVuQnk8VEtleSwgVFNvdXJjZT4oXG4gICAgICBzb3VyY2U6IE9yZGVyZWRJdGVyYWJsZUJhc2VYPFRTb3VyY2U+LFxuICAgICAga2V5U2VsZWN0b3I6IChpdGVtOiBUU291cmNlKSA9PiBUS2V5LFxuICAgICAgY29tcGFyZXI6IChmc3Q6IFRLZXksIHNuZDogVEtleSkgPT4gbnVtYmVyID0gZGVmYXVsdFNvcnRlcik6IE9yZGVyZWRJdGVyYWJsZVg8VEtleSwgVFNvdXJjZT4ge1xuICByZXR1cm4gbmV3IE9yZGVyZWRJdGVyYWJsZVg8VEtleSwgVFNvdXJjZT4oc291cmNlLl9zb3VyY2UsIGtleVNlbGVjdG9yLCBjb21wYXJlciwgZmFsc2UsIHNvdXJjZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0aGVuQnlEZXNjZW5kaW5nPFRLZXksIFRTb3VyY2U+KFxuICAgICAgc291cmNlOiBPcmRlcmVkSXRlcmFibGVCYXNlWDxUU291cmNlPixcbiAgICAgIGtleVNlbGVjdG9yOiAoaXRlbTogVFNvdXJjZSkgPT4gVEtleSxcbiAgICAgIGNvbXBhcmVyOiAoZnN0OiBUS2V5LCBzbmQ6IFRLZXkpID0+IG51bWJlciA9IGRlZmF1bHRTb3J0ZXIpOiBPcmRlcmVkSXRlcmFibGVYPFRLZXksIFRTb3VyY2U+IHtcbiAgcmV0dXJuIG5ldyBPcmRlcmVkSXRlcmFibGVYPFRLZXksIFRTb3VyY2U+KHNvdXJjZS5fc291cmNlLCBrZXlTZWxlY3RvciwgY29tcGFyZXIsIHRydWUsIHNvdXJjZSk7XG59XG4iXX0=
