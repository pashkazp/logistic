Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var iterable_1 = require("../iterable");
/**
 * @ignore
 */
function defaultCompare(key, minValue) {
    return key > minValue ? 1 : key < minValue ? -1 : 0;
}
exports.defaultCompare = defaultCompare;
/**
 * @ignore
 */
var ExtremaByIterable = (function (_super) {
    tslib_1.__extends(ExtremaByIterable, _super);
    function ExtremaByIterable(source, keyFn, cmp) {
        var _this = _super.call(this) || this;
        _this._source = source;
        _this._keyFn = keyFn;
        _this._cmp = cmp;
        return _this;
    }
    ExtremaByIterable.prototype[Symbol.iterator] = function () {
        var result, next, it, current, resKey, curr, key, c;
        return tslib_1.__generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    result = [];
                    it = this._source[Symbol.iterator]();
                    if ((next = it.next()).done) {
                        throw new Error('Sequence contains no elements');
                    }
                    current = next.value, resKey = this._keyFn(current);
                    result.push(current);
                    while (!(next = it.next()).done) {
                        curr = next.value, key = this._keyFn(curr);
                        c = this._cmp(key, resKey);
                        if (c === 0) {
                            result.push(curr);
                        }
                        else if (c > 0) {
                            result = [curr];
                            resKey = key;
                        }
                    }
                    return [5 /*yield**/, tslib_1.__values(result)];
                case 1:
                    _a.sent();
                    return [2 /*return*/];
            }
        });
    };
    return ExtremaByIterable;
}(iterable_1.IterableX));
/**
 * @ignore
 */
function extremaBy(source, keyFn, cmp) {
    return new ExtremaByIterable(source, keyFn, cmp);
}
exports.extremaBy = extremaBy;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZXJhYmxlL19leHRyZW1hYnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx3Q0FBd0M7QUFFeEM7O0dBRUc7QUFDSCx3QkFBa0MsR0FBTSxFQUFFLFFBQVc7SUFDbkQsTUFBTSxDQUFDLEdBQUcsR0FBRyxRQUFRLEdBQUcsQ0FBQyxHQUFHLEdBQUcsR0FBRyxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFGRCx3Q0FFQztBQUVEOztHQUVHO0FBQ0g7SUFBK0MsNkNBQWtCO0lBSy9ELDJCQUNJLE1BQXlCLEVBQ3pCLEtBQTJCLEVBQzNCLEdBQWlDO1FBSHJDLFlBSUUsaUJBQU8sU0FJUjtRQUhDLEtBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQ3RCLEtBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ3BCLEtBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDOztJQUNsQixDQUFDO0lBRUEsNEJBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFsQjs7Ozs7b0JBQ00sTUFBTSxHQUFjLEVBQUUsQ0FBTztvQkFDM0IsRUFBRSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7b0JBQzNDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7d0JBQzVCLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQztvQkFDbkQsQ0FBQztvQkFFRyxPQUFPLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDeEQsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztvQkFDckIsT0FBTyxDQUFDLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO3dCQUM1QixJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssRUFBRSxHQUFHLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzt3QkFDekMsQ0FBQyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO3dCQUNqQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDWixNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNwQixDQUFDO3dCQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQzs0QkFDakIsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7NEJBQ2hCLE1BQU0sR0FBRyxHQUFHLENBQUM7d0JBQ2YsQ0FBQztvQkFDSCxDQUFDO29CQUVELHNCQUFBLGlCQUFPLE1BQU0sQ0FBQSxFQUFBOztvQkFBYixTQUFhLENBQUM7Ozs7S0FDZjtJQUNILHdCQUFDO0FBQUQsQ0FyQ0EsQUFxQ0MsQ0FyQzhDLG9CQUFTLEdBcUN2RDtBQUVEOztHQUVHO0FBQ0gsbUJBQ0ksTUFBeUIsRUFDekIsS0FBMkIsRUFDM0IsR0FBaUM7SUFDbkMsTUFBTSxDQUFDLElBQUksaUJBQWlCLENBQWdCLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDbEUsQ0FBQztBQUxELDhCQUtDIiwiZmlsZSI6Iml0ZXJhYmxlL19leHRyZW1hYnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJdGVyYWJsZVggfSBmcm9tICcuLi9pdGVyYWJsZSc7XG5cbi8qKlxuICogQGlnbm9yZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdENvbXBhcmU8VD4oa2V5OiBULCBtaW5WYWx1ZTogVCk6IG51bWJlciB7XG4gIHJldHVybiBrZXkgPiBtaW5WYWx1ZSA/IDEgOiBrZXkgPCBtaW5WYWx1ZSA/IC0xIDogMDtcbn1cblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmNsYXNzIEV4dHJlbWFCeUl0ZXJhYmxlPFRTb3VyY2UsIFRLZXk+IGV4dGVuZHMgSXRlcmFibGVYPFRTb3VyY2U+IHtcbiAgcHJpdmF0ZSBfc291cmNlOiBJdGVyYWJsZTxUU291cmNlPjtcbiAgcHJpdmF0ZSBfa2V5Rm46ICh4OiBUU291cmNlKSA9PiBUS2V5O1xuICBwcml2YXRlIF9jbXA6ICh4OiBUS2V5LCB5OiBUS2V5KSA9PiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgICBzb3VyY2U6IEl0ZXJhYmxlPFRTb3VyY2U+LFxuICAgICAga2V5Rm46ICh4OiBUU291cmNlKSA9PiBUS2V5LFxuICAgICAgY21wOiAoeDogVEtleSwgeTogVEtleSkgPT4gbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5fa2V5Rm4gPSBrZXlGbjtcbiAgICB0aGlzLl9jbXAgPSBjbXA7XG4gIH1cblxuICAqW1N5bWJvbC5pdGVyYXRvcl0oKSB7XG4gICAgbGV0IHJlc3VsdDogVFNvdXJjZVtdID0gW10sIG5leHQ7XG4gICAgY29uc3QgaXQgPSB0aGlzLl9zb3VyY2VbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgIGlmICgobmV4dCA9IGl0Lm5leHQoKSkuZG9uZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdTZXF1ZW5jZSBjb250YWlucyBubyBlbGVtZW50cycpO1xuICAgIH1cblxuICAgIGxldCBjdXJyZW50ID0gbmV4dC52YWx1ZSwgcmVzS2V5ID0gdGhpcy5fa2V5Rm4oY3VycmVudCk7XG4gICAgcmVzdWx0LnB1c2goY3VycmVudCk7XG4gICAgd2hpbGUgKCEobmV4dCA9IGl0Lm5leHQoKSkuZG9uZSkge1xuICAgICAgbGV0IGN1cnIgPSBuZXh0LnZhbHVlLCBrZXkgPSB0aGlzLl9rZXlGbihjdXJyKTtcbiAgICAgIGNvbnN0IGMgPSB0aGlzLl9jbXAoa2V5LCByZXNLZXkpO1xuICAgICAgaWYgKGMgPT09IDApIHtcbiAgICAgICAgcmVzdWx0LnB1c2goY3Vycik7XG4gICAgICB9IGVsc2UgaWYgKGMgPiAwKSB7XG4gICAgICAgIHJlc3VsdCA9IFtjdXJyXTtcbiAgICAgICAgcmVzS2V5ID0ga2V5O1xuICAgICAgfVxuICAgIH1cblxuICAgIHlpZWxkKiByZXN1bHQ7XG4gIH1cbn1cblxuLyoqXG4gKiBAaWdub3JlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRyZW1hQnk8VFNvdXJjZSwgVEtleT4oXG4gICAgc291cmNlOiBJdGVyYWJsZTxUU291cmNlPixcbiAgICBrZXlGbjogKHg6IFRTb3VyY2UpID0+IFRLZXksXG4gICAgY21wOiAoeDogVEtleSwgeTogVEtleSkgPT4gbnVtYmVyKTogSXRlcmFibGVYPFRTb3VyY2U+IHtcbiAgcmV0dXJuIG5ldyBFeHRyZW1hQnlJdGVyYWJsZTxUU291cmNlLCBUS2V5Pihzb3VyY2UsIGtleUZuLCBjbXApO1xufVxuIl19
