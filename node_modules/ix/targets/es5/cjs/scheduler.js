Object.defineProperty(exports, "__esModule", { value: true });
var ActionSubscription = (function () {
    function ActionSubscription(action) {
        this.isUnsubscribed = false;
        this._action = action;
    }
    ActionSubscription.prototype.unsubscribe = function () {
        if (!this.isUnsubscribed) {
            this.isUnsubscribed = true;
            this._action();
        }
    };
    return ActionSubscription;
}());
var DefaultScheduler = (function () {
    function DefaultScheduler() {
    }
    Object.defineProperty(DefaultScheduler.prototype, "now", {
        get: function () {
            return Date.now();
        },
        enumerable: true,
        configurable: true
    });
    DefaultScheduler.prototype.delay = function (dueTime) {
        return new Promise(function (res) { return setTimeout(res, dueTime); });
    };
    DefaultScheduler.prototype.schedule = function (action, dueTime) {
        var id = setTimeout(function () { return action(); }, dueTime);
        return new ActionSubscription(function () { return clearTimeout(id); });
    };
    return DefaultScheduler;
}());
exports.DefaultScheduler = DefaultScheduler;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjaGVkdWxlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBVUE7SUFJRSw0QkFBWSxNQUFrQjtRQUh2QixtQkFBYyxHQUFHLEtBQUssQ0FBQztRQUk1QixJQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztJQUN4QixDQUFDO0lBRUQsd0NBQVcsR0FBWDtRQUNFLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7WUFDekIsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUM7WUFDM0IsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2pCLENBQUM7SUFDSCxDQUFDO0lBQ0gseUJBQUM7QUFBRCxDQWRBLEFBY0MsSUFBQTtBQUVEO0lBQUE7SUFhQSxDQUFDO0lBWkMsc0JBQUksaUNBQUc7YUFBUDtZQUNFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFDcEIsQ0FBQzs7O09BQUE7SUFFRCxnQ0FBSyxHQUFMLFVBQU0sT0FBZTtRQUNuQixNQUFNLENBQUMsSUFBSSxPQUFPLENBQU8sVUFBQSxHQUFHLElBQUksT0FBQSxVQUFVLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxFQUF4QixDQUF3QixDQUFDLENBQUM7SUFDNUQsQ0FBQztJQUVELG1DQUFRLEdBQVIsVUFBUyxNQUFrQixFQUFFLE9BQWU7UUFDMUMsSUFBTSxFQUFFLEdBQUcsVUFBVSxDQUFDLGNBQU0sT0FBQSxNQUFNLEVBQUUsRUFBUixDQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLElBQUksa0JBQWtCLENBQUMsY0FBTSxPQUFBLFlBQVksQ0FBQyxFQUFFLENBQUMsRUFBaEIsQ0FBZ0IsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFDSCx1QkFBQztBQUFELENBYkEsQUFhQyxJQUFBO0FBYlksNENBQWdCIiwiZmlsZSI6InNjaGVkdWxlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJy4vc3Vic2NyaXB0aW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBTY2hlZHVsZXIge1xuICByZWFkb25seSBub3c6IG51bWJlcjtcbiAgZGVsYXkodGltZTogbnVtYmVyKTogUHJvbWlzZTx2b2lkPjtcbiAgc2NoZWR1bGUoXG4gICAgYWN0aW9uOiAoKSA9PiB2b2lkLFxuICAgIGR1ZVRpbWU6IG51bWJlcik6IFN1YnNjcmlwdGlvbjtcbn1cblxuY2xhc3MgQWN0aW9uU3Vic2NyaXB0aW9uIGltcGxlbWVudHMgU3Vic2NyaXB0aW9uIHtcbiAgcHVibGljIGlzVW5zdWJzY3JpYmVkID0gZmFsc2U7XG4gIHByaXZhdGUgX2FjdGlvbjogKCkgPT4gdm9pZDtcblxuICBjb25zdHJ1Y3RvcihhY3Rpb246ICgpID0+IHZvaWQpIHtcbiAgICB0aGlzLl9hY3Rpb24gPSBhY3Rpb247XG4gIH1cblxuICB1bnN1YnNjcmliZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNVbnN1YnNjcmliZWQpIHtcbiAgICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fYWN0aW9uKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEZWZhdWx0U2NoZWR1bGVyIGltcGxlbWVudHMgU2NoZWR1bGVyIHtcbiAgZ2V0IG5vdygpIHtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxuXG4gIGRlbGF5KGR1ZVRpbWU6IG51bWJlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPihyZXMgPT4gc2V0VGltZW91dChyZXMsIGR1ZVRpbWUpKTtcbiAgfVxuXG4gIHNjaGVkdWxlKGFjdGlvbjogKCkgPT4gdm9pZCwgZHVlVGltZTogbnVtYmVyKTogU3Vic2NyaXB0aW9uIHtcbiAgICBjb25zdCBpZCA9IHNldFRpbWVvdXQoKCkgPT4gYWN0aW9uKCksIGR1ZVRpbWUpO1xuICAgIHJldHVybiBuZXcgQWN0aW9uU3Vic2NyaXB0aW9uKCgpID0+IGNsZWFyVGltZW91dChpZCkpO1xuICB9XG59Il19
