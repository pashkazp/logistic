Object.defineProperty(exports, "__esModule", { value: true });
var BooleanSubscription = (function () {
    function BooleanSubscription() {
        this.isUnsubscribed = false;
    }
    BooleanSubscription.prototype.unsubscribe = function () {
        this.isUnsubscribed = true;
    };
    return BooleanSubscription;
}());
var AsyncIterableObservable = (function () {
    function AsyncIterableObservable(source) {
        this._source = source;
    }
    AsyncIterableObservable.prototype.subscribe = function (observer) {
        var subscription = new BooleanSubscription();
        var it = this._source[Symbol.asyncIterator]();
        var f = function () {
            it.next()
                .then(function (_a) {
                var value = _a.value, done = _a.done;
                if (!subscription.isUnsubscribed) {
                    if (done) {
                        observer.complete();
                    }
                    else {
                        observer.next(value);
                        f();
                    }
                }
            })
                .catch(function (err) {
                if (!subscription.isUnsubscribed) {
                    observer.error(err);
                }
            });
        };
        f();
        return subscription;
    };
    return AsyncIterableObservable;
}());
function toObservable(source) {
    return new AsyncIterableObservable(source);
}
exports.toObservable = toObservable;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvdG9vYnNlcnZhYmxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFHQTtJQUFBO1FBQ1MsbUJBQWMsR0FBWSxLQUFLLENBQUM7SUFLekMsQ0FBQztJQUhDLHlDQUFXLEdBQVg7UUFDRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQztJQUM3QixDQUFDO0lBQ0gsMEJBQUM7QUFBRCxDQU5BLEFBTUMsSUFBQTtBQUVEO0lBR0UsaUNBQVksTUFBOEI7UUFDeEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7SUFDeEIsQ0FBQztJQUVELDJDQUFTLEdBQVQsVUFBVSxRQUEyQjtRQUNuQyxJQUFNLFlBQVksR0FBRyxJQUFJLG1CQUFtQixFQUFFLENBQUM7UUFFL0MsSUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztRQUNoRCxJQUFNLENBQUMsR0FBRztZQUNSLEVBQUUsQ0FBQyxJQUFJLEVBQUU7aUJBQ04sSUFBSSxDQUFDLFVBQUMsRUFBYTtvQkFBWixnQkFBSyxFQUFFLGNBQUk7Z0JBQ2pCLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7d0JBQ1QsUUFBUSxDQUFDLFFBQVEsRUFBRSxDQUFDO29CQUN0QixDQUFDO29CQUFDLElBQUksQ0FBQyxDQUFDO3dCQUNOLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7d0JBQ3JCLENBQUMsRUFBRSxDQUFDO29CQUNOLENBQUM7Z0JBQ0gsQ0FBQztZQUNILENBQUMsQ0FBQztpQkFDRCxLQUFLLENBQUMsVUFBQSxHQUFHO2dCQUNSLEVBQUUsQ0FBQyxDQUFDLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7b0JBQ2pDLFFBQVEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQ3RCLENBQUM7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUMsQ0FBQztRQUNGLENBQUMsRUFBRSxDQUFDO1FBRUosTUFBTSxDQUFDLFlBQVksQ0FBQztJQUN0QixDQUFDO0lBQ0gsOEJBQUM7QUFBRCxDQWpDQSxBQWlDQyxJQUFBO0FBRUQsc0JBQXNDLE1BQThCO0lBQ2xFLE1BQU0sQ0FBQyxJQUFJLHVCQUF1QixDQUFVLE1BQU0sQ0FBQyxDQUFDO0FBQ3RELENBQUM7QUFGRCxvQ0FFQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL3Rvb2JzZXJ2YWJsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE9ic2VydmFibGUsIE9ic2VydmVyIH0gZnJvbSAnLi4vb2JzZXJ2ZXInO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAnLi4vc3Vic2NyaXB0aW9uJztcblxuY2xhc3MgQm9vbGVhblN1YnNjcmlwdGlvbiBpbXBsZW1lbnRzIFN1YnNjcmlwdGlvbiB7XG4gIHB1YmxpYyBpc1Vuc3Vic2NyaWJlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHVuc3Vic2NyaWJlKCkge1xuICAgIHRoaXMuaXNVbnN1YnNjcmliZWQgPSB0cnVlO1xuICB9XG59XG5cbmNsYXNzIEFzeW5jSXRlcmFibGVPYnNlcnZhYmxlPFRTb3VyY2U+IGltcGxlbWVudHMgT2JzZXJ2YWJsZTxUU291cmNlPiB7XG4gIHByaXZhdGUgX3NvdXJjZTogQXN5bmNJdGVyYWJsZTxUU291cmNlPjtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEFzeW5jSXRlcmFibGU8VFNvdXJjZT4pIHtcbiAgICB0aGlzLl9zb3VyY2UgPSBzb3VyY2U7XG4gIH1cblxuICBzdWJzY3JpYmUob2JzZXJ2ZXI6IE9ic2VydmVyPFRTb3VyY2U+KSB7XG4gICAgY29uc3Qgc3Vic2NyaXB0aW9uID0gbmV3IEJvb2xlYW5TdWJzY3JpcHRpb24oKTtcblxuICAgIGNvbnN0IGl0ID0gdGhpcy5fc291cmNlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgIGNvbnN0IGYgPSAoKSA9PiB7XG4gICAgICBpdC5uZXh0KClcbiAgICAgICAgLnRoZW4oKHt2YWx1ZSwgZG9uZX0pID0+IHtcbiAgICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgICAgICBmKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBpZiAoIXN1YnNjcmlwdGlvbi5pc1Vuc3Vic2NyaWJlZCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgZigpO1xuXG4gICAgcmV0dXJuIHN1YnNjcmlwdGlvbjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdG9PYnNlcnZhYmxlPFRTb3VyY2U+KHNvdXJjZTogQXN5bmNJdGVyYWJsZTxUU291cmNlPik6IE9ic2VydmFibGU8VFNvdXJjZT4ge1xuICByZXR1cm4gbmV3IEFzeW5jSXRlcmFibGVPYnNlcnZhYmxlPFRTb3VyY2U+KHNvdXJjZSk7XG59XG4iXX0=
