Object.defineProperty(exports, "__esModule", { value: true });
var fromeventpattern_1 = require("./fromeventpattern");
function isNodeEventEmitter(obj) {
    return !!obj && typeof obj.addListener === 'function' && typeof obj.removeListener === 'function';
}
function isEventTarget(obj) {
    return !!obj && typeof obj.addEventListener === 'function' && typeof obj.removeEventListener === 'function';
}
function fromEvent(obj, type, options) {
    if (isEventTarget(obj)) {
        var target_1 = (obj);
        return fromeventpattern_1.fromEventPattern(function (h) { return target_1.addEventListener(type, (h), options); }, function (h) { return target_1.removeEventListener(type, (h), options); });
    }
    else if (isNodeEventEmitter(obj)) {
        var target_2 = (obj);
        return fromeventpattern_1.fromEventPattern(function (h) { return target_2.addListener(type, h); }, function (h) { return target_2.removeListener(type, h); });
    }
    else {
        throw new TypeError('Unsupported event target');
    }
}
exports.fromEvent = fromEvent;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jaXRlcmFibGUvZnJvbWV2ZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSx1REFBc0Q7QUFldEQsNEJBQTRCLEdBQVE7SUFDbEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksT0FBTyxHQUFHLENBQUMsV0FBVyxLQUFLLFVBQVUsSUFBSSxPQUFPLEdBQUcsQ0FBQyxjQUFjLEtBQUssVUFBVSxDQUFDO0FBQ3BHLENBQUM7QUFFRCx1QkFBdUIsR0FBUTtJQUM3QixNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxPQUFPLEdBQUcsQ0FBQyxnQkFBZ0IsS0FBSyxVQUFVLElBQUksT0FBTyxHQUFHLENBQUMsbUJBQW1CLEtBQUssVUFBVSxDQUFDO0FBQzlHLENBQUM7QUFFRCxtQkFDSSxHQUFrQixFQUNsQixJQUFZLEVBQ1osT0FBOEI7SUFDaEMsRUFBRSxDQUFDLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2QixJQUFNLFFBQU0sR0FBZ0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNsQyxNQUFNLENBQUMsbUNBQWdCLENBQ3JCLFVBQUEsQ0FBQyxJQUFJLE9BQUEsUUFBTSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBaUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsRUFBMUQsQ0FBMEQsRUFDL0QsVUFBQSxDQUFDLElBQUksT0FBQSxRQUFNLENBQUMsbUJBQW1CLENBQUMsSUFBSSxFQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUE3RCxDQUE2RCxDQUNuRSxDQUFDO0lBQ0osQ0FBQztJQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDbkMsSUFBTSxRQUFNLEdBQXFCLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDdkMsTUFBTSxDQUFDLG1DQUFnQixDQUNyQixVQUFBLENBQUMsSUFBSSxPQUFBLFFBQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUEzQixDQUEyQixFQUNoQyxVQUFBLENBQUMsSUFBSSxPQUFBLFFBQU0sQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUE5QixDQUE4QixDQUNwQyxDQUFDO0lBQ0osQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sTUFBTSxJQUFJLFNBQVMsQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO0lBQ2xELENBQUM7QUFDSCxDQUFDO0FBbkJELDhCQW1CQyIsImZpbGUiOiJhc3luY2l0ZXJhYmxlL2Zyb21ldmVudC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZyb21FdmVudFBhdHRlcm4gfSBmcm9tICcuL2Zyb21ldmVudHBhdHRlcm4nO1xuXG5leHBvcnQgdHlwZSBOb2RlRXZlbnRFbWl0dGVyICA9IHtcbiAgYWRkTGlzdGVuZXI6IChldmVudE5hbWU6IHN0cmluZywgaGFuZGxlcjogRnVuY3Rpb24pID0+IHZvaWQ7XG4gIHJlbW92ZUxpc3RlbmVyOiAoZXZlbnROYW1lOiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IHR5cGUgRXZlbnRMaXN0ZW5lck9wdGlvbnMgPSB7XG4gIGNhcHR1cmU/OiBib29sZWFuO1xuICBwYXNzaXZlPzogYm9vbGVhbjtcbiAgb25jZT86IGJvb2xlYW47XG59IHwgYm9vbGVhbjtcblxuZXhwb3J0IHR5cGUgRXZlbnRlZFRhcmdldCA9IEV2ZW50VGFyZ2V0IHwgTm9kZUV2ZW50RW1pdHRlcjtcblxuZnVuY3Rpb24gaXNOb2RlRXZlbnRFbWl0dGVyKG9iajogYW55KTogb2JqIGlzIE5vZGVFdmVudEVtaXR0ZXIge1xuICByZXR1cm4gISFvYmogJiYgdHlwZW9mIG9iai5hZGRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnJlbW92ZUxpc3RlbmVyID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc0V2ZW50VGFyZ2V0KG9iajogYW55KTogb2JqIGlzIEV2ZW50VGFyZ2V0IHtcbiAgcmV0dXJuICEhb2JqICYmIHR5cGVvZiBvYmouYWRkRXZlbnRMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbic7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXZlbnQ8VFNvdXJjZT4oXG4gICAgb2JqOiBFdmVudGVkVGFyZ2V0LFxuICAgIHR5cGU6IHN0cmluZyxcbiAgICBvcHRpb25zPzogRXZlbnRMaXN0ZW5lck9wdGlvbnMpIHtcbiAgaWYgKGlzRXZlbnRUYXJnZXQob2JqKSkge1xuICAgIGNvbnN0IHRhcmdldCA9IDxFdmVudFRhcmdldD4ob2JqKTtcbiAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybjxUU291cmNlPihcbiAgICAgIGggPT4gdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgPEV2ZW50TGlzdGVuZXI+KGgpLCBvcHRpb25zKSxcbiAgICAgIGggPT4gdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgPEV2ZW50TGlzdGVuZXI+KGgpLCBvcHRpb25zKVxuICAgICk7XG4gIH0gZWxzZSBpZiAoaXNOb2RlRXZlbnRFbWl0dGVyKG9iaikpIHtcbiAgICBjb25zdCB0YXJnZXQgPSA8Tm9kZUV2ZW50RW1pdHRlcj4ob2JqKTtcbiAgICByZXR1cm4gZnJvbUV2ZW50UGF0dGVybjxUU291cmNlPihcbiAgICAgIGggPT4gdGFyZ2V0LmFkZExpc3RlbmVyKHR5cGUsIGgpLFxuICAgICAgaCA9PiB0YXJnZXQucmVtb3ZlTGlzdGVuZXIodHlwZSwgaClcbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vuc3VwcG9ydGVkIGV2ZW50IHRhcmdldCcpO1xuICB9XG59XG4iXX0=
